var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function l(e){return document.createTextNode(e)}function f(){return l(" ")}function d(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function p(e,t,n){e.classList[n?"add":"remove"](t)}let g;function h(e){g=e}function v(){if(!g)throw new Error("Function called outside component initialization");return g}function y(e){v().$$.on_mount.push(e)}function _(e){v().$$.on_destroy.push(e)}function w(){const e=v();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach((t=>{t.call(e,o)}))}}}const b=[],E=[],x=[],C=[],k=Promise.resolve();let S=!1;function D(e){x.push(e)}let A=!1;const L=new Set;function F(){if(!A){A=!0;do{for(let e=0;e<b.length;e+=1){const t=b[e];h(t),B(t.$$)}for(h(null),b.length=0;E.length;)E.pop()();for(let e=0;e<x.length;e+=1){const t=x[e];L.has(t)||(L.add(t),t())}x.length=0}while(b.length);for(;C.length;)C.pop()();S=!1,A=!1,L.clear()}}function B(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(D)}}const M=new Set;let P;function R(){P={r:0,c:[],p:P}}function T(){P.r||r(P.c),P=P.p}function z(e,t){e&&e.i&&(M.delete(e),e.i(t))}function O(e,t,n,r){if(e&&e.o){if(M.has(e))return;M.add(e),P.c.push((()=>{M.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}function I(e){e&&e.c()}function N(e,n,i){const{fragment:a,on_mount:s,on_destroy:u,after_update:c}=e.$$;a&&a.m(n,i),D((()=>{const n=s.map(t).filter(o);u?u.push(...n):r(n),e.$$.on_mount=[]})),c.forEach(D)}function G(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(e,t){-1===e.$$.dirty[0]&&(b.push(e),S||(S=!0,k.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function j(t,o,i,a,s,c,l=[-1]){const f=g;h(t);const d=o.props||{},m=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:n(),dirty:l,skip_bound:!1};let p=!1;if(m.ctx=i?i(t,d,((e,n,...r)=>{const o=r.length?r[0]:n;return m.ctx&&s(m.ctx[e],m.ctx[e]=o)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](o),p&&U(t,e)),n})):[],m.update(),p=!0,r(m.before_update),m.fragment=!!a&&a(m.ctx),o.target){if(o.hydrate){const e=function(e){return Array.from(e.childNodes)}(o.target);m.fragment&&m.fragment.l(e),e.forEach(u)}else m.fragment&&m.fragment.c();o.intro&&z(t.$$.fragment),N(t,o.target,o.anchor),F()}h(f)}class V{$destroy(){G(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class H extends class{constructor(e,t,n,r){this.__componentElement=e,this.__canvasElement=t,this.__consoleElement=n,this.__initialModule=r.initialModule||{},this.__wasmPath=r.wasmPath,this.__setOptions(r)}__setOptions(e){this.__options={...this.__getDefaultOptionsForVersion(e),...e}}__getDefaultOptionsForVersion(e){const t={redirectCanvasRequests:!0,captureFocusOnComponent:!0,captureTabKey:!1,resizeCanvasOnElementSizing:!0,resizeCanvasOnFullscreenChange:!0,adjustViewportByDevicePixelRatio:!0,disposeCanvasOnAbort:!0};return e.emsdkVersion?(e.emsdkVersion,t):t}static async initialize(){throw new Error("Manager::initialize() not implemented by the subclass.")}callMain(){throw new Error("Manager::callMain() not implemented by the subclass.")}abort(){throw new Error("Manager::abort() not implemented by the subclass.")}pauseMainLoop(){throw new Error("Manager::pauseMainLoop() not implemented by the subclass.")}resumeMainLoop(){throw new Error("Manager::resumeMainLoop() not implemented by the subclass.")}async requestFullscreen(){throw new Error("Manager::requestFullscreen() not implemented by the subclass.")}async exitFullscreen(){throw new Error("Manager::exitFullscreen() not implemented by the subclass.")}onResizeCanvas(){throw new Error("Manager::onResizeCanvas() not implemented by the subclass.")}async _initializeModule(){throw new Error("Manager::_initializeModule() not implemented by the subclass.")}__getLocateFile(){const e=this.__wasmPath,t=this.__isAbsoluteUrl.bind(this);return function(n,r){return e?t(e)?e:r+e:r+n}}__isAbsoluteUrl(e){try{return new URL(e),!0}catch(e){return!1}}_patchModule(){throw new Error("Manager::_patchModule() not implemented by subclass.")}__disposeGlContexts(e){e.GL&&Object.keys(e.GL.contexts).forEach((function(t){try{const n=e.GL.contexts[t].GLctx.getExtension("WEBGL_lose_context");n&&n.loseContext(),e.GL.deleteContext(t)}catch(e){}}))}__getPrintHandler(){const e=this.__initialModule.print instanceof Function?this.__initialModule.print.bind(this):null;var t=this.__consoleElement;return t&&(t.value=""),function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments).join(" ")),console.log(n),t&&(t.value+=n+"\n",t.scrollTop=t.scrollHeight),e instanceof Function&&e(n)}}__getPrintErrHandler(){const e=this.__initialModule.printErr instanceof Function?this.__initialModule.printErr.bind(this):null;return function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments).join(" ")),console.error(t),e instanceof Function&&e(t)}}}{constructor(e,t,n,r,o){super(t,n,r,o),this._moduleFactory=e}static async initialize(e,t,n,r,o){const i=new H(e,t,n,r,o);return await i._initializeModule(),i}async callMain(e){this._moduleInstance.callMain(e)}async abort(e="Aborted by JS component."){try{this._moduleInstance.abort(e)}catch(e){}}async pauseMainLoop(){this._moduleInstance.pauseMainLoop()}async resumeMainLoop(){this._moduleInstance.resumeMainLoop()}async requestFullscreen(){return await this.__canvasElement.requestFullscreen()}async exitFullscreen(){return await this.__canvasElement.exitFullscreen()}onResizeCanvas(...e){this.__options.resizeCanvasOnElementSizing&&this._handleResizeCanvas(...e)}async _initializeModule(){this._moduleInstance=await this._moduleFactory({locateFile:this.__getLocateFile(),...this.__initialModule,noInitialRun:!0,keyboardListeningElement:this.__options.captureFocusOnComponent?this.__componentElement:void 0,canvas:this.__options.redirectCanvasRequests?this.__canvasElement:void 0,onAbort:this._getAbortHandler(),print:this.__getPrintHandler(),printErr:this.__getPrintErrHandler()}),this._patchModule()}_patchModule(){this._patchCanvasQueries(),this._attachFocusInvokers(),this._patchGlViewport(),this._patchEventHandlers()}_patchCanvasQueries(){this.__options.redirectCanvasRequests&&this.__canvasElement instanceof HTMLElement&&(this._moduleInstance.specialHTMLTargets["#canvas"]=this.__canvasElement)}_attachFocusInvokers(){if(!this.__options.captureFocusOnComponent)return;let e=this.__componentElement,t=function(){e.focus()};this.__canvasElement instanceof HTMLElement&&(this.__canvasElement.addEventListener("mousedown",t,!0),this.__canvasElement.addEventListener("touchstart",t,!0))}_patchEventHandlers(){const e=this._patchKeyEventHandler.bind(this),t=this._patchResizeEventHandler.bind(this),n=this._patchFullscreenchangedEventHandler.bind(this);var r;this._moduleInstance.JSEvents.registerOrRemoveHandler=(r=this._moduleInstance.JSEvents.registerOrRemoveHandler,function(o){e(o)||t(o)||n(o),r(o)})}_patchKeyEventHandler(e){return!(e.target!==window||!e.eventTypeString.startsWith("key"))&&(this.__options.captureFocusOnComponent&&(e.target=this.__componentElement),this.__options.captureTabKey||(e.handlerFunc=(t=e.handlerFunc,function(e){9!==e.keyCode&&t(e)})),!0);var t}_handleResizeCanvas(e){const t=new FocusEvent("resize",{relatedTarget:e.target});window.dispatchEvent(t)}_patchResizeEventHandler(e){if(e.target!==window||"resize"!==e.eventTypeString)return!1;const t=this.__options,n=this.__canvasElement,r=this._fixCanvasSizing.bind(this),o=this._fixCanvasViewport.bind(this);var i;return e.handlerFunc=(i=e.handlerFunc,function(e){t.resizeCanvasOnElementSizing?e.relatedTarget===n&&i(e):i(e),t.resizeCanvasOnFullscreenChange&&document.fullscreenElement===n?(r(),o()):t.resizeCanvasOnElementSizing&&o()}),!0}_patchFullscreenchangedEventHandler(e){if(!this.__options.resizeCanvasOnFullscreenChange)return;if(e.target!==document||!e.eventTypeString.endsWith("fullscreenchange"))return!1;const t=this.__canvasElement,n=this._fixCanvasSizing.bind(this),r=this._fixCanvasViewport.bind(this);var o;return e.handlerFunc=(o=e.handlerFunc,function(e){o(e),!document.fullscreenElement&&(e.target===t||e.srcElement===t)&&(n(),r())}),!0}_patchGlViewport(){if(!this.__options.adjustViewportByDevicePixelRatio)return;const e=this._moduleInstance.GL;if(!e)return;let t=(n=e.createContext,function(...t){let r=n.apply(e,t);if(!r)return r;let o=e.getContext(r).GLctx;if(!o)return r;let i=(a=o.viewport,function(e,t,n,r){const i=window.devicePixelRatio;if(1!==i){const e=Math.floor(n*i),t=Math.floor(r*i),a=1;e>=o.canvas.width&&e<=a+o.canvas.width&&t>=o.canvas.height&&t<=a+o.canvas.height&&(n=o.canvas.width,r=o.canvas.height)}a.call(o,e,t,n,r)});var a;return o.viewport=i,r});var n;e.createContext=t}_fixCanvasSizing(){const e=this.__canvasElement.getBoundingClientRect(),t=window.devicePixelRatio;this.__canvasElement.width=e.width*t,this.__canvasElement.height=e.height*t}_fixCanvasViewport(){const e=this.__canvasElement.getContext("webgl");e&&e.viewport(0,0,this.__canvasElement.width,this.__canvasElement.height)}_getAbortHandler(){const e=this.__disposeGlContexts.bind(this),t=this.__options,n=this.__initialModule;return function(r){t.disposeCanvasOnAbort&&e(this),n.onAbort instanceof Function&&n.onAbort(r)}}}var q,X=[],$="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(q||(q={}));var W,Y=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),Q=function(e){return e instanceof SVGElement&&"getBBox"in e},K=function(e){if(Q(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},J=function(e){var t,n,r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},Z="undefined"!=typeof window?window:{},ee=new WeakMap,te=/auto|scroll/,ne=/^tb|vertical/,re=/msie|trident/i.test(Z.navigator&&Z.navigator.userAgent),oe=function(e){return parseFloat(e||"0")},ie=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},ae=Object.freeze({devicePixelContentBoxSize:ie(),borderBoxSize:ie(),contentBoxSize:ie(),contentRect:new Y(0,0,0,0)}),se=function(e,t){if(void 0===t&&(t=!1),ee.has(e)&&!t)return ee.get(e);if(K(e))return ee.set(e,ae),ae;var n=getComputedStyle(e),r=Q(e)&&e.ownerSVGElement&&e.getBBox(),o=!re&&"border-box"===n.boxSizing,i=ne.test(n.writingMode||""),a=!r&&te.test(n.overflowY||""),s=!r&&te.test(n.overflowX||""),u=r?0:oe(n.paddingTop),c=r?0:oe(n.paddingRight),l=r?0:oe(n.paddingBottom),f=r?0:oe(n.paddingLeft),d=r?0:oe(n.borderTopWidth),m=r?0:oe(n.borderRightWidth),p=r?0:oe(n.borderBottomWidth),g=f+c,h=u+l,v=(r?0:oe(n.borderLeftWidth))+m,y=d+p,_=s?e.offsetHeight-y-e.clientHeight:0,w=a?e.offsetWidth-v-e.clientWidth:0,b=o?g+v:0,E=o?h+y:0,x=r?r.width:oe(n.width)-b-w,C=r?r.height:oe(n.height)-E-_,k=x+g+w+v,S=C+h+_+y,D=Object.freeze({devicePixelContentBoxSize:ie(Math.round(x*devicePixelRatio),Math.round(C*devicePixelRatio),i),borderBoxSize:ie(k,S,i),contentBoxSize:ie(x,C,i),contentRect:new Y(f,u,x,C)});return ee.set(e,D),D},ue=function(e,t,n){var r=se(e,n),o=r.borderBoxSize,i=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(t){case q.DEVICE_PIXEL_CONTENT_BOX:return a;case q.BORDER_BOX:return o;default:return i}},ce=function(e){var t=se(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},le=function(e){if(K(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},fe=function(){var e=1/0,t=[];X.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new ce(t.target),o=le(t.target);r.push(n),t.lastReportedSize=ue(t.target,t.observedBox),o<e&&(e=o)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++){(0,r[n])()}return e},de=function(e){X.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(le(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},me=function(){var e=0;for(de(e);X.some((function(e){return e.activeTargets.length>0}));)e=fe(),de(e);return X.some((function(e){return e.skippedTargets.length>0}))&&function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:$}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=$),window.dispatchEvent(e)}(),e>0},pe=[],ge=function(e){if(!W){var t=0,n=document.createTextNode("");new MutationObserver((function(){return pe.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),W=function(){n.textContent=""+(t?t--:t++)}}pe.push(e),W()},he=0,ve={attributes:!0,characterData:!0,childList:!0,subtree:!0},ye=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],_e=function(e){return void 0===e&&(e=0),Date.now()+e},we=!1,be=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!we){we=!0;var n,r=_e(e);n=function(){var n=!1;try{n=me()}finally{if(we=!1,e=r-_e(),!he)return;n?t.run(1e3):e>0?t.run(e):t.start()}},ge((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,ve)};document.body?t():Z.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ye.forEach((function(t){return Z.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),ye.forEach((function(t){return Z.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),Ee=function(e){!he&&e>0&&be.start(),!(he+=e)&&be.stop()},xe=function(){function e(e,t){this.target=e,this.observedBox=t||q.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=ue(this.target,this.observedBox,!0);return e=this.target,Q(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Ce=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},ke=new WeakMap,Se=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},De=function(){function e(){}return e.connect=function(e,t){var n=new Ce(e,t);ke.set(e,n)},e.observe=function(e,t,n){var r=ke.get(e),o=0===r.observationTargets.length;Se(r.observationTargets,t)<0&&(o&&X.push(r),r.observationTargets.push(new xe(t,n&&n.box)),Ee(1),be.schedule())},e.unobserve=function(e,t){var n=ke.get(e),r=Se(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&X.splice(X.indexOf(n),1),n.observationTargets.splice(r,1),Ee(-1))},e.disconnect=function(e){var t=this,n=ke.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),Ae=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");De.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!J(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");De.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!J(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");De.unobserve(this,e)},e.prototype.disconnect=function(){De.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),Le=ResizeObserver=window.ResizeObserver||Ae;function Fe(t){let n;return{c(){var e,t,r;n=c("div"),e="width",t="0px",n.style.setProperty(e,t,r?"important":"")},m(e,r){s(e,n,r),t[3](n)},p:e,i:e,o:e,d(e){e&&u(n),t[3](null)}}}function Be(e,t,n){let{elementResize:r}=t;const o=w();let i,a;return y((()=>{n(2,a=new Le((e=>{o("resize",e[0])})))})),_((()=>{a.disconnect()})),e.$$set=e=>{"elementResize"in e&&n(1,r=e.elementResize)},e.$$.update=()=>{if(7&e.$$.dirty&&(i||r)){const e=r||i.parentNode;a.observe(e)}},[i,r,a,function(e){E[e?"unshift":"push"]((()=>{i=e,n(0,i)}))}]}class Me extends V{constructor(e){super(),j(this,e,Be,Fe,i,{elementResize:1})}}function Pe(e){let t,n,r,o,i,l,d;return l=new Me({props:{elementResize:e[6]}}),l.$on("resize",e[4]),{c(){t=c("div"),n=c("canvas"),r=f(),o=c("textarea"),i=f(),I(l.$$.fragment),m(n,"oncontextmenu","event.preventDefault()"),m(n,"tabindex","-1"),m(n,"class","svelte-w4c9sk"),p(n,"hide",!e[1]),m(t,"class","canvasContainer svelte-w4c9sk"),p(t,"hide",!e[1]),m(o,"rows","8"),m(o,"class","svelte-w4c9sk"),p(o,"hide",!e[2])},m(u,c){s(u,t,c),a(t,n),e[17](n),s(u,r,c),s(u,o,c),e[18](o),s(u,i,c),N(l,u,c),d=!0},p(e,r){2&r&&p(n,"hide",!e[1]),2&r&&p(t,"hide",!e[1]),4&r&&p(o,"hide",!e[2]);const i={};64&r&&(i.elementResize=e[6]),l.$set(i)},i(e){d||(z(l.$$.fragment,e),d=!0)},o(e){O(l.$$.fragment,e),d=!1},d(n){n&&u(t),e[17](null),n&&u(r),n&&u(o),e[18](null),n&&u(i),G(l,n)}}}function Re(t){let n;return{c(){n=l("Error: No Emscripten Module is defined!")},m(e,t){s(e,n,t)},p:e,i:e,o:e,d(e){e&&u(n)}}}function Te(e){let t,n,r,o,i;const a=[Re,Pe],l=[];function f(e,t){return void 0===e[0]?0:1}return n=f(e),r=l[n]=a[n](e),{c(){t=c("div"),r.c(),m(t,"class","emscriptenMain svelte-w4c9sk"),m(t,"tabindex",o=e[1]?"0":e[2]?"-1":"0"),p(t,"portrait",e[3])},m(r,o){s(r,t,o),l[n].m(t,null),e[19](t),i=!0},p(e,[s]){let u=n;n=f(e),n===u?l[n].p(e,s):(R(),O(l[u],1,1,(()=>{l[u]=null})),T(),r=l[n],r?r.p(e,s):(r=l[n]=a[n](e),r.c()),z(r,1),r.m(t,null)),(!i||6&s&&o!==(o=e[1]?"0":e[2]?"-1":"0"))&&m(t,"tabindex",o),8&s&&p(t,"portrait",e[3])},i(e){i||(z(r),i=!0)},o(e){O(r),i=!1},d(r){r&&u(t),l[n].d(),e[19](null)}}}function ze(e,t,n){let r,o,i,a,{module:s=null}=t,{canvas:u=!0}=t,{console:c=!0}=t,{verticalOrientation:l=!1}=t,{options:f={}}=t;function d(){return!!o}async function m(){if(d())return void c.warn("Module already initialized!");let e={...f,captureFocusOnComponent:!f.global,captureTabKey:!!f.global};await async function(e){o=await H.initialize(s,r,i,a,e)}(e)}function p(e){d()&&o.abort(e)}async function g(e){d()&&await o.callMain(e)}return y((async()=>{await m(),f.autorun&&g()})),_((()=>{p("Emscripten component dismounted")})),e.$$set=e=>{"module"in e&&n(0,s=e.module),"canvas"in e&&n(1,u=e.canvas),"console"in e&&n(2,c=e.console),"verticalOrientation"in e&&n(3,l=e.verticalOrientation),"options"in e&&n(8,f=e.options)},[s,u,c,l,function(e){if(d()){let t=e.detail;o.onResizeCanvas(t)}},r,i,a,f,m,p,async function(){p(),o=null,await m()},g,async function(){d()&&await o.pauseMainLoop()},async function(){d()&&await o.resumeMainLoop()},async function(){if(d())return await o.requestFullscreen()},async function(){if(d())return await o.exitFullscreen()},function(e){E[e?"unshift":"push"]((()=>{i=e,n(6,i)}))},function(e){E[e?"unshift":"push"]((()=>{a=e,n(7,a)}))},function(e){E[e?"unshift":"push"]((()=>{r=e,n(5,r)}))}]}class Oe extends V{constructor(e){super(),j(this,e,ze,Te,i,{module:0,canvas:1,console:2,verticalOrientation:3,options:8,initialize:9,abort:10,reset:11,callMain:12,pauseMainLoop:13,resumeMainLoop:14,requestFullscreen:15,exitFullscreen:16,_onResizeCanvas:4})}get initialize(){return this.$$.ctx[9]}get abort(){return this.$$.ctx[10]}get reset(){return this.$$.ctx[11]}get callMain(){return this.$$.ctx[12]}get pauseMainLoop(){return this.$$.ctx[13]}get resumeMainLoop(){return this.$$.ctx[14]}get requestFullscreen(){return this.$$.ctx[15]}get exitFullscreen(){return this.$$.ctx[16]}get _onResizeCanvas(){return this.$$.ctx[4]}}var Ie,Ne,Ge=(function(e,t){var n,r=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var t,r;(e=void 0!==(e=e||{})?e:{}).ready=new Promise((function(e,n){t=e,r=n}));var o,i={};for(o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);var a,s,u,c=[],l="./this.program",f=function(e,t){throw t},d="";"undefined"!=typeof document&&document.currentScript&&(d=document.currentScript.src),n&&(d=n),d=0!==d.indexOf("blob:")?d.substr(0,d.lastIndexOf("/")+1):"",a=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},s=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)},u=function(e){document.title=e};var m,p,g,h=e.print||console.log.bind(console),v=e.printErr||console.warn.bind(console);for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);function y(e){y.shown||(y.shown={}),y.shown[e]||(y.shown[e]=1,v(e))}function _(e,t,n,r){switch("*"===(n=n||"i8").charAt(n.length-1)&&(n="i32"),n){case"i1":case"i8":x[e>>0]=t;break;case"i16":k[e>>1]=t;break;case"i32":D[e>>2]=t;break;case"i64":K=[t>>>0,(Q=t,+Math.abs(Q)>=1?Q>0?(0|Math.min(+Math.floor(Q/4294967296),4294967295))>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],D[e>>2]=K[0],D[e+4>>2]=K[1];break;case"float":L[e>>2]=t;break;case"double":F[e>>3]=t;break;default:$("invalid type for setValue: "+n)}}i=null,e.arguments&&(c=e.arguments),e.thisProgram&&(l=e.thisProgram),e.quit&&(f=e.quit),e.wasmBinary&&(m=e.wasmBinary),e.noExitRuntime&&(p=e.noExitRuntime),"object"!=typeof WebAssembly&&$("no native wasm support detected");var w=!1;function b(e,t){e||$("Assertion failed: "+t)}var E,x,C,k,S,D,A,L,F,B="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function M(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&B)return B.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(a);else{var c=a-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i}function P(e,t){return e?M(C,e,t):""}function R(e,t,n,r){if(!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o}function T(e,t,n){return R(e,C,t,n)}function z(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}function O(e){var t=z(e)+1,n=At(t);return n&&R(e,x,n,t),n}function I(e){var t=z(e)+1,n=Pt(t);return R(e,x,n,t),n}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le"),e.INITIAL_MEMORY;var N=[],G=[],U=[],j=[];G.push({func:function(){St()}});var V=0,H=null;function q(t){V++,e.monitorRunDependencies&&e.monitorRunDependencies(V)}function X(t){if(V--,e.monitorRunDependencies&&e.monitorRunDependencies(V),0==V&&H){var n=H;H=null,n()}}function $(t){e.onAbort&&e.onAbort(t),v(t+=""),w=!0,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var n=new WebAssembly.RuntimeError(t);throw r(n),n}function W(e){return t=e,n="data:application/octet-stream;base64,",String.prototype.startsWith?t.startsWith(n):0===t.indexOf(n);var t,n}e.preloadedImages={},e.preloadedAudios={};var Y,Q,K,J="wasm-test.wasm";function Z(e){try{if(e==J&&m)return new Uint8Array(m);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}W(J)||(Y=J,J=e.locateFile?e.locateFile(Y,d):d+Y);var ee={37948:function(t,n,r){var o=t,i=n,a=r;e.SDL2||(e.SDL2={});var s=e.SDL2;s.ctxCanvas!==e.canvas&&(s.ctx=e.createContext(e.canvas,!1,!0),s.ctxCanvas=e.canvas),s.w===o&&s.h===i&&s.imageCtx===s.ctx||(s.image=s.ctx.createImageData(o,i),s.w=o,s.h=i,s.imageCtx=s.ctx);var u,c=s.image.data,l=a>>2,f=0;if("undefined"!=typeof CanvasPixelArray&&c instanceof CanvasPixelArray)for(u=c.length;f<u;){var d=D[l];c[f]=255&d,c[f+1]=d>>8&255,c[f+2]=d>>16&255,c[f+3]=255,l++,f+=4}else{s.data32Data!==c&&(s.data32=new Int32Array(c.buffer),s.data8=new Uint8Array(c.buffer));var m=s.data32;u=m.length,m.set(D.subarray(l,l+u));var p=s.data8,g=3,h=g+4*u;if(u%8==0)for(;g<h;)p[g]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,p[g=g+4|0]=255,g=g+4|0;else for(;g<h;)p[g]=255,g=g+4|0}return s.ctx.putImageData(s.image,0,0),0},39427:function(e,t,n,r,o){var i=e,a=t,s=n,u=r,c=o,l=document.createElement("canvas");l.width=i,l.height=a;var f,d=l.getContext("2d"),m=d.createImageData(i,a),p=m.data,g=c>>2,h=0;if("undefined"!=typeof CanvasPixelArray&&p instanceof CanvasPixelArray)for(f=p.length;h<f;){var v=D[g];p[h]=255&v,p[h+1]=v>>8&255,p[h+2]=v>>16&255,p[h+3]=v>>24&255,g++,h+=4}else{var y=new Int32Array(p.buffer);f=y.length,y.set(D.subarray(g,g+f))}d.putImageData(m,0,0);var _=0===s&&0===u?"url("+l.toDataURL()+"), auto":"url("+l.toDataURL()+") "+s+" "+u+", auto",w=At(_.length+1);return T(_,w,_.length+1),w},40416:function(t){return e.canvas&&(e.canvas.style.cursor=P(t)),0},40509:function(){e.canvas&&(e.canvas.style.cursor="none")},41734:function(){return screen.width},41761:function(){return screen.height},41789:function(){return window.innerWidth},41821:function(){return window.innerHeight},41899:function(e){return u(P(e)),0},42033:function(){return"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext?1:0},42199:function(){return void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia||void 0!==navigator.webkitGetUserMedia?1:0},42425:function(t){void 0===e.SDL2&&(e.SDL2={});var n,r,o=e.SDL2;return t?o.capture={}:o.audio={},o.audioContext||("undefined"!=typeof AudioContext?o.audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(o.audioContext=new webkitAudioContext),o.audioContext&&(n=o.audioContext,r||(r=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach((function(e){r.forEach((function(t){t&&function(e,t,n){e.addEventListener(t,n,{once:!0})}(t,e,(function(){"suspended"===n.state&&n.resume()}))}))})))),void 0===o.audioContext?-1:0},42978:function(){return e.SDL2.audioContext.sampleRate},43048:function(t,n,r,o){var i=e.SDL2,a=function(e){void 0!==i.capture.silenceTimer&&(clearTimeout(i.capture.silenceTimer),i.capture.silenceTimer=void 0),i.capture.mediaStreamNode=i.audioContext.createMediaStreamSource(e),i.capture.scriptProcessorNode=i.audioContext.createScriptProcessor(n,t,1),i.capture.scriptProcessorNode.onaudioprocess=function(e){void 0!==i&&void 0!==i.capture&&(e.outputBuffer.getChannelData(0).fill(0),i.capture.currentCaptureBuffer=e.inputBuffer,ne("vi",r,[o]))},i.capture.mediaStreamNode.connect(i.capture.scriptProcessorNode),i.capture.scriptProcessorNode.connect(i.audioContext.destination),i.capture.stream=e},s=function(e){};i.capture.silenceBuffer=i.audioContext.createBuffer(t,n,i.audioContext.sampleRate),i.capture.silenceBuffer.getChannelData(0).fill(0),i.capture.silenceTimer=setTimeout((function(){i.capture.currentCaptureBuffer=i.capture.silenceBuffer,ne("vi",r,[o])}),n/i.audioContext.sampleRate*1e3),void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(a).catch(s):void 0!==navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia({audio:!0,video:!1},a,s)},44700:function(t,n,r,o){var i=e.SDL2;i.audio.scriptProcessorNode=i.audioContext.createScriptProcessor(n,0,t),i.audio.scriptProcessorNode.onaudioprocess=function(e){void 0!==i&&void 0!==i.audio&&(i.audio.currentOutputBuffer=e.outputBuffer,ne("vi",r,[o]))},i.audio.scriptProcessorNode.connect(i.audioContext.destination)},45110:function(t,n){for(var r=e.SDL2,o=r.capture.currentCaptureBuffer.numberOfChannels,i=0;i<o;++i){var a=r.capture.currentCaptureBuffer.getChannelData(i);if(a.length!=n)throw"Web Audio capture buffer length mismatch! Destination size: "+a.length+" samples vs expected "+n+" samples!";if(1==o)for(var s=0;s<n;++s)_(t+4*s,a[s],"float");else for(s=0;s<n;++s)_(t+4*(s*o+i),a[s],"float")}},45715:function(t,n){for(var r=e.SDL2,o=r.audio.currentOutputBuffer.numberOfChannels,i=0;i<o;++i){var a=r.audio.currentOutputBuffer.getChannelData(i);if(a.length!=n)throw"Web Audio output buffer length mismatch! Destination size: "+a.length+" samples vs expected "+n+" samples!";for(var s=0;s<n;++s)a[s]=L[t+(s*o+i<<2)>>2]}},46195:function(t){var n=e.SDL2;if(t){if(void 0!==n.capture.silenceTimer&&clearTimeout(n.capture.silenceTimer),void 0!==n.capture.stream){for(var r=n.capture.stream.getAudioTracks(),o=0;o<r.length;o++)n.capture.stream.removeTrack(r[o]);n.capture.stream=void 0}void 0!==n.capture.scriptProcessorNode&&(n.capture.scriptProcessorNode.onaudioprocess=function(e){},n.capture.scriptProcessorNode.disconnect(),n.capture.scriptProcessorNode=void 0),void 0!==n.capture.mediaStreamNode&&(n.capture.mediaStreamNode.disconnect(),n.capture.mediaStreamNode=void 0),void 0!==n.capture.silenceBuffer&&(n.capture.silenceBuffer=void 0),n.capture=void 0}else null!=n.audio.scriptProcessorNode&&(n.audio.scriptProcessorNode.disconnect(),n.audio.scriptProcessorNode=void 0),n.audio=void 0;void 0!==n.audioContext&&void 0===n.audio&&void 0===n.capture&&(n.audioContext.close(),n.audioContext=void 0)}};function te(t){for(;t.length>0;){var n=t.shift();if("function"!=typeof n){var r=n.func;"number"==typeof r?void 0===n.arg?zt.call(null,r):(o=n.arg,Rt.apply(null,[r,o])):r(void 0===n.arg?null:n.arg)}else n(e)}var o}function ne(t,n,r){return function(t,n,r){return r&&r.length?e["dynCall_"+t].apply(null,[n].concat(r)):e["dynCall_"+t].call(null,n)}(t,n,r)}var re=0,oe=4,ie=8,ae=12,se=13,ue=16;function ce(e){this.excPtr=e,this.ptr=e-ue,this.set_type=function(e){D[this.ptr+ie>>2]=e},this.get_type=function(){return D[this.ptr+ie>>2]},this.set_destructor=function(e){D[this.ptr+re>>2]=e},this.get_destructor=function(){return D[this.ptr+re>>2]},this.set_refcount=function(e){D[this.ptr+oe>>2]=e},this.set_caught=function(e){e=e?1:0,x[this.ptr+ae>>0]=e},this.get_caught=function(){return 0!=x[this.ptr+ae>>0]},this.set_rethrown=function(e){e=e?1:0,x[this.ptr+se>>0]=e},this.get_rethrown=function(){return 0!=x[this.ptr+se>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=D[this.ptr+oe>>2];D[this.ptr+oe>>2]=e+1},this.release_ref=function(){var e=D[this.ptr+oe>>2];return D[this.ptr+oe>>2]=e-1,1===e}}function le(e){return D[Lt()>>2]=e,e}var fe={splitPath:function(e){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1)},normalizeArray:function(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:function(e){var t="/"===e.charAt(0),n="/"===e.substr(-1);return(e=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:function(e){var t=fe.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:function(e){if("/"===e)return"/";var t=(e=(e=fe.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},extname:function(e){return fe.splitPath(e)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return fe.normalize(e.join("/"))},join2:function(e,t){return fe.normalize(e+"/"+t)}},de={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:ve.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t="/"===r.charAt(0)}return(t?"/":"")+(e=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/"))||"."},relative:function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=de.resolve(e).substr(1),t=de.resolve(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var u=[];for(s=a;s<r.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},me={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){me.ttys[e]={input:[],output:[],ops:t},ve.registerDevice(e,me.stream_ops)},stream_ops:{open:function(e){var t=me.ttys[e.node.rdev];if(!t)throw new ve.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new ve.ErrnoError(60);for(var i=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new ve.ErrnoError(29)}if(void 0===s&&0===i)throw new ve.ErrnoError(6);if(null==s)break;i++,t[n+a]=s}return i&&(e.node.timestamp=Date.now()),i},write:function(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new ve.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new ve.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=xt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(h(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(h(M(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(v(M(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&e.output.length>0&&(v(M(e.output,0)),e.output=[])}}};function pe(e){for(var t=function(e,t){return t||(t=16),Math.ceil(e/t)*t}(e,16384),n=At(t);e<t;)x[n+e++]=0;return n}var ge,he={ops_table:null,mount:function(e){return he.createNode(null,"/",16895,0)},createNode:function(e,t,n,r){if(ve.isBlkdev(n)||ve.isFIFO(n))throw new ve.ErrnoError(63);he.ops_table||(he.ops_table={dir:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr,lookup:he.node_ops.lookup,mknod:he.node_ops.mknod,rename:he.node_ops.rename,unlink:he.node_ops.unlink,rmdir:he.node_ops.rmdir,readdir:he.node_ops.readdir,symlink:he.node_ops.symlink},stream:{llseek:he.stream_ops.llseek}},file:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr},stream:{llseek:he.stream_ops.llseek,read:he.stream_ops.read,write:he.stream_ops.write,allocate:he.stream_ops.allocate,mmap:he.stream_ops.mmap,msync:he.stream_ops.msync}},link:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr,readlink:he.node_ops.readlink},stream:{}},chrdev:{node:{getattr:he.node_ops.getattr,setattr:he.node_ops.setattr},stream:ve.chrdev_stream_ops}});var o=ve.createNode(e,t,n,r);return ve.isDir(o.mode)?(o.node_ops=he.ops_table.dir.node,o.stream_ops=he.ops_table.dir.stream,o.contents={}):ve.isFile(o.mode)?(o.node_ops=he.ops_table.file.node,o.stream_ops=he.ops_table.file.stream,o.usedBytes=0,o.contents=null):ve.isLink(o.mode)?(o.node_ops=he.ops_table.link.node,o.stream_ops=he.ops_table.link.stream):ve.isChrdev(o.mode)&&(o.node_ops=he.ops_table.chrdev.node,o.stream_ops=he.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsRegularArray:function(e){if(e.contents&&e.contents.subarray){for(var t=[],n=0;n<e.usedBytes;++n)t.push(e.contents[n]);return t}return e.contents},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(e.usedBytes!=t){if(0==t)return e.contents=null,void(e.usedBytes=0);if(!e.contents||e.contents.subarray){var n=e.contents;return e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),void(e.usedBytes=t)}if(e.contents||(e.contents=[]),e.contents.length>t)e.contents.length=t;else for(;e.contents.length<t;)e.contents.push(0);e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ve.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ve.isDir(e.mode)?t.size=4096:ve.isFile(e.mode)?t.size=e.usedBytes:ve.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&he.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ve.genericErrors[44]},mknod:function(e,t,n,r){return he.createNode(e,t,n,r)},rename:function(e,t,n){if(ve.isDir(e.mode)){var r;try{r=ve.lookupNode(t,n)}catch(e){}if(r)for(var o in r.contents)throw new ve.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var n=ve.lookupNode(e,t);for(var r in n.contents)throw new ve.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var n in e.contents)e.contents.hasOwnProperty(n)&&t.push(n);return t},symlink:function(e,t,n){var r=he.createNode(e,t,41471,0);return r.link=n,r},readlink:function(e){if(!ve.isLink(e.mode))throw new ve.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,n,r,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,r);if(a>8&&i.subarray)t.set(i.subarray(o,o+a),n);else for(var s=0;s<a;s++)t[n+s]=i[o+s];return a},write:function(e,t,n,r,o,i){if(!r)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),o),r}if(he.expandFileStorage(a,o+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),o);else for(var s=0;s<r;s++)a.contents[o+s]=t[n+s];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek:function(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&ve.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new ve.ErrnoError(28);return r},allocate:function(e,t,n){he.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap:function(e,t,n,r,o,i){if(0!==t)throw new ve.ErrnoError(28);if(!ve.isFile(e.node.mode))throw new ve.ErrnoError(43);var a,s,u=e.node.contents;if(2&i||u.buffer!==E){if((r>0||r+n<u.length)&&(u=u.subarray?u.subarray(r,r+n):Array.prototype.slice.call(u,r,r+n)),s=!0,!(a=pe(n)))throw new ve.ErrnoError(48);x.set(u,a)}else s=!1,a=u.byteOffset;return{ptr:a,allocated:s}},msync:function(e,t,n,r,o){if(!ve.isFile(e.node.mode))throw new ve.ErrnoError(43);return 2&o||he.stream_ops.write(e,t,0,r,n,!1),0}}},ve={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e,t){if(t=t||{},!(e=de.resolve(ve.cwd(),e)))return{path:"",node:null};var n={follow_mount:!0,recurse_count:0};for(var r in n)void 0===t[r]&&(t[r]=n[r]);if(t.recurse_count>8)throw new ve.ErrnoError(32);for(var o=fe.normalizeArray(e.split("/").filter((function(e){return!!e})),!1),i=ve.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&t.parent)break;if(i=ve.lookupNode(i,o[s]),a=fe.join2(a,o[s]),ve.isMountpoint(i)&&(!u||u&&t.follow_mount)&&(i=i.mounted.root),!u||t.follow)for(var c=0;ve.isLink(i.mode);){var l=ve.readlink(a);if(a=de.resolve(fe.dirname(a),l),i=ve.lookupPath(a,{recurse_count:t.recurse_count}).node,c++>40)throw new ve.ErrnoError(32)}}return{path:a,node:i}},getPath:function(e){for(var t;;){if(ve.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?n+"/"+t:n+t:n}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:function(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%ve.nameTable.length},hashAddNode:function(e){var t=ve.hashName(e.parent.id,e.name);e.name_next=ve.nameTable[t],ve.nameTable[t]=e},hashRemoveNode:function(e){var t=ve.hashName(e.parent.id,e.name);if(ve.nameTable[t]===e)ve.nameTable[t]=e.name_next;else for(var n=ve.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode:function(e,t){var n=ve.mayLookup(e);if(n)throw new ve.ErrnoError(n,e);for(var r=ve.hashName(e.id,t),o=ve.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return ve.lookup(e,t)},createNode:function(e,t,n,r){var o=new ve.FSNode(e,t,n,r);return ve.hashAddNode(o),o},destroyNode:function(e){ve.hashRemoveNode(e)},isRoot:function(e){return e===e.parent},isMountpoint:function(e){return!!e.mounted},isFile:function(e){return 32768==(61440&e)},isDir:function(e){return 16384==(61440&e)},isLink:function(e){return 40960==(61440&e)},isChrdev:function(e){return 8192==(61440&e)},isBlkdev:function(e){return 24576==(61440&e)},isFIFO:function(e){return 4096==(61440&e)},isSocket:function(e){return 49152==(49152&e)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(e){var t=ve.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:function(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:function(e,t){return ve.ignorePermissions||(-1===t.indexOf("r")||292&e.mode)&&(-1===t.indexOf("w")||146&e.mode)&&(-1===t.indexOf("x")||73&e.mode)?0:2},mayLookup:function(e){var t=ve.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:function(e,t){try{return ve.lookupNode(e,t),20}catch(e){}return ve.nodePermissions(e,"wx")},mayDelete:function(e,t,n){var r;try{r=ve.lookupNode(e,t)}catch(e){return e.errno}var o=ve.nodePermissions(e,"wx");if(o)return o;if(n){if(!ve.isDir(r.mode))return 54;if(ve.isRoot(r)||ve.getPath(r)===ve.cwd())return 10}else if(ve.isDir(r.mode))return 31;return 0},mayOpen:function(e,t){return e?ve.isLink(e.mode)?32:ve.isDir(e.mode)&&("r"!==ve.flagsToPermissionString(t)||512&t)?31:ve.nodePermissions(e,ve.flagsToPermissionString(t)):44},MAX_OPEN_FDS:4096,nextfd:function(e,t){e=e||0,t=t||ve.MAX_OPEN_FDS;for(var n=e;n<=t;n++)if(!ve.streams[n])return n;throw new ve.ErrnoError(33)},getStream:function(e){return ve.streams[e]},createStream:function(e,t,n){ve.FSStream||(ve.FSStream=function(){},ve.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var r=new ve.FSStream;for(var o in e)r[o]=e[o];e=r;var i=ve.nextfd(t,n);return e.fd=i,ve.streams[i]=e,e},closeStream:function(e){ve.streams[e]=null},chrdev_stream_ops:{open:function(e){var t=ve.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:function(){throw new ve.ErrnoError(70)}},major:function(e){return e>>8},minor:function(e){return 255&e},makedev:function(e,t){return e<<8|t},registerDevice:function(e,t){ve.devices[e]={stream_ops:t}},getDevice:function(e){return ve.devices[e]},getMounts:function(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push.apply(n,r.mounts)}return t},syncfs:function(e,t){"function"==typeof e&&(t=e,e=!1),ve.syncFSRequests++,ve.syncFSRequests>1&&v("warning: "+ve.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=ve.getMounts(ve.root.mount),r=0;function o(e){return ve.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++r>=n.length&&o(null)}n.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount:function(e,t,n){var r,o="/"===n,i=!n;if(o&&ve.root)throw new ve.ErrnoError(10);if(!o&&!i){var a=ve.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,ve.isMountpoint(r))throw new ve.ErrnoError(10);if(!ve.isDir(r.mode))throw new ve.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,o?ve.root=u:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),u},unmount:function(e){var t=ve.lookupPath(e,{follow_mount:!1});if(!ve.isMountpoint(t.node))throw new ve.ErrnoError(28);var n=t.node,r=n.mounted,o=ve.getMounts(r);Object.keys(ve.nameTable).forEach((function(e){for(var t=ve.nameTable[e];t;){var n=t.name_next;-1!==o.indexOf(t.mount)&&ve.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);n.mount.mounts.splice(i,1)},lookup:function(e,t){return e.node_ops.lookup(e,t)},mknod:function(e,t,n){var r=ve.lookupPath(e,{parent:!0}).node,o=fe.basename(e);if(!o||"."===o||".."===o)throw new ve.ErrnoError(28);var i=ve.mayCreate(r,o);if(i)throw new ve.ErrnoError(i);if(!r.node_ops.mknod)throw new ve.ErrnoError(63);return r.node_ops.mknod(r,o,t,n)},create:function(e,t){return t=void 0!==t?t:438,t&=4095,t|=32768,ve.mknod(e,t,0)},mkdir:function(e,t){return t=void 0!==t?t:511,t&=1023,t|=16384,ve.mknod(e,t,0)},mkdirTree:function(e,t){for(var n=e.split("/"),r="",o=0;o<n.length;++o)if(n[o]){r+="/"+n[o];try{ve.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(e,t,n){return void 0===n&&(n=t,t=438),t|=8192,ve.mknod(e,t,n)},symlink:function(e,t){if(!de.resolve(e))throw new ve.ErrnoError(44);var n=ve.lookupPath(t,{parent:!0}).node;if(!n)throw new ve.ErrnoError(44);var r=fe.basename(t),o=ve.mayCreate(n,r);if(o)throw new ve.ErrnoError(o);if(!n.node_ops.symlink)throw new ve.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename:function(e,t){var n,r,o=fe.dirname(e),i=fe.dirname(t),a=fe.basename(e),s=fe.basename(t);if(n=ve.lookupPath(e,{parent:!0}).node,r=ve.lookupPath(t,{parent:!0}).node,!n||!r)throw new ve.ErrnoError(44);if(n.mount!==r.mount)throw new ve.ErrnoError(75);var u,c=ve.lookupNode(n,a),l=de.relative(e,i);if("."!==l.charAt(0))throw new ve.ErrnoError(28);if("."!==(l=de.relative(t,o)).charAt(0))throw new ve.ErrnoError(55);try{u=ve.lookupNode(r,s)}catch(e){}if(c!==u){var f=ve.isDir(c.mode),d=ve.mayDelete(n,a,f);if(d)throw new ve.ErrnoError(d);if(d=u?ve.mayDelete(r,s,f):ve.mayCreate(r,s))throw new ve.ErrnoError(d);if(!n.node_ops.rename)throw new ve.ErrnoError(63);if(ve.isMountpoint(c)||u&&ve.isMountpoint(u))throw new ve.ErrnoError(10);if(r!==n&&(d=ve.nodePermissions(n,"w")))throw new ve.ErrnoError(d);try{ve.trackingDelegate.willMovePath&&ve.trackingDelegate.willMovePath(e,t)}catch(n){v("FS.trackingDelegate['willMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}ve.hashRemoveNode(c);try{n.node_ops.rename(c,r,s)}catch(e){throw e}finally{ve.hashAddNode(c)}try{ve.trackingDelegate.onMovePath&&ve.trackingDelegate.onMovePath(e,t)}catch(n){v("FS.trackingDelegate['onMovePath']('"+e+"', '"+t+"') threw an exception: "+n.message)}}},rmdir:function(e){var t=ve.lookupPath(e,{parent:!0}).node,n=fe.basename(e),r=ve.lookupNode(t,n),o=ve.mayDelete(t,n,!0);if(o)throw new ve.ErrnoError(o);if(!t.node_ops.rmdir)throw new ve.ErrnoError(63);if(ve.isMountpoint(r))throw new ve.ErrnoError(10);try{ve.trackingDelegate.willDeletePath&&ve.trackingDelegate.willDeletePath(e)}catch(t){v("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.rmdir(t,n),ve.destroyNode(r);try{ve.trackingDelegate.onDeletePath&&ve.trackingDelegate.onDeletePath(e)}catch(t){v("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readdir:function(e){var t=ve.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ve.ErrnoError(54);return t.node_ops.readdir(t)},unlink:function(e){var t=ve.lookupPath(e,{parent:!0}).node,n=fe.basename(e),r=ve.lookupNode(t,n),o=ve.mayDelete(t,n,!1);if(o)throw new ve.ErrnoError(o);if(!t.node_ops.unlink)throw new ve.ErrnoError(63);if(ve.isMountpoint(r))throw new ve.ErrnoError(10);try{ve.trackingDelegate.willDeletePath&&ve.trackingDelegate.willDeletePath(e)}catch(t){v("FS.trackingDelegate['willDeletePath']('"+e+"') threw an exception: "+t.message)}t.node_ops.unlink(t,n),ve.destroyNode(r);try{ve.trackingDelegate.onDeletePath&&ve.trackingDelegate.onDeletePath(e)}catch(t){v("FS.trackingDelegate['onDeletePath']('"+e+"') threw an exception: "+t.message)}},readlink:function(e){var t=ve.lookupPath(e).node;if(!t)throw new ve.ErrnoError(44);if(!t.node_ops.readlink)throw new ve.ErrnoError(28);return de.resolve(ve.getPath(t.parent),t.node_ops.readlink(t))},stat:function(e,t){var n=ve.lookupPath(e,{follow:!t}).node;if(!n)throw new ve.ErrnoError(44);if(!n.node_ops.getattr)throw new ve.ErrnoError(63);return n.node_ops.getattr(n)},lstat:function(e){return ve.stat(e,!0)},chmod:function(e,t,n){var r;if(!(r="string"==typeof e?ve.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new ve.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(e,t){ve.chmod(e,t,!0)},fchmod:function(e,t){var n=ve.getStream(e);if(!n)throw new ve.ErrnoError(8);ve.chmod(n.node,t)},chown:function(e,t,n,r){var o;if(!(o="string"==typeof e?ve.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new ve.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(e,t,n){ve.chown(e,t,n,!0)},fchown:function(e,t,n){var r=ve.getStream(e);if(!r)throw new ve.ErrnoError(8);ve.chown(r.node,t,n)},truncate:function(e,t){if(t<0)throw new ve.ErrnoError(28);var n;if(!(n="string"==typeof e?ve.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ve.ErrnoError(63);if(ve.isDir(n.mode))throw new ve.ErrnoError(31);if(!ve.isFile(n.mode))throw new ve.ErrnoError(28);var r=ve.nodePermissions(n,"w");if(r)throw new ve.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate:function(e,t){var n=ve.getStream(e);if(!n)throw new ve.ErrnoError(8);if(0==(2097155&n.flags))throw new ve.ErrnoError(28);ve.truncate(n.node,t)},utime:function(e,t,n){var r=ve.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open:function(t,n,r,o,i){if(""===t)throw new ve.ErrnoError(44);var a;if(r=void 0===r?438:r,r=64&(n="string"==typeof n?ve.modeStringToFlags(n):n)?4095&r|32768:0,"object"==typeof t)a=t;else{t=fe.normalize(t);try{a=ve.lookupPath(t,{follow:!(131072&n)}).node}catch(e){}}var s=!1;if(64&n)if(a){if(128&n)throw new ve.ErrnoError(20)}else a=ve.mknod(t,r,0),s=!0;if(!a)throw new ve.ErrnoError(44);if(ve.isChrdev(a.mode)&&(n&=-513),65536&n&&!ve.isDir(a.mode))throw new ve.ErrnoError(54);if(!s){var u=ve.mayOpen(a,n);if(u)throw new ve.ErrnoError(u)}512&n&&ve.truncate(a,0),n&=-131713;var c=ve.createStream({node:a,path:ve.getPath(a),flags:n,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},o,i);c.stream_ops.open&&c.stream_ops.open(c),!e.logReadFiles||1&n||(ve.readFiles||(ve.readFiles={}),t in ve.readFiles||(ve.readFiles[t]=1,v("FS.trackingDelegate error on read file: "+t)));try{if(ve.trackingDelegate.onOpenFile){var l=0;1!=(2097155&n)&&(l|=ve.tracking.openFlags.READ),0!=(2097155&n)&&(l|=ve.tracking.openFlags.WRITE),ve.trackingDelegate.onOpenFile(t,l)}}catch(e){v("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+e.message)}return c},close:function(e){if(ve.isClosed(e))throw new ve.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ve.closeStream(e.fd)}e.fd=null},isClosed:function(e){return null===e.fd},llseek:function(e,t,n){if(ve.isClosed(e))throw new ve.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ve.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new ve.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read:function(e,t,n,r,o){if(r<0||o<0)throw new ve.ErrnoError(28);if(ve.isClosed(e))throw new ve.ErrnoError(8);if(1==(2097155&e.flags))throw new ve.ErrnoError(8);if(ve.isDir(e.node.mode))throw new ve.ErrnoError(31);if(!e.stream_ops.read)throw new ve.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new ve.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,n,r,o);return i||(e.position+=a),a},write:function(e,t,n,r,o,i){if(r<0||o<0)throw new ve.ErrnoError(28);if(ve.isClosed(e))throw new ve.ErrnoError(8);if(0==(2097155&e.flags))throw new ve.ErrnoError(8);if(ve.isDir(e.node.mode))throw new ve.ErrnoError(31);if(!e.stream_ops.write)throw new ve.ErrnoError(28);e.seekable&&1024&e.flags&&ve.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new ve.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,n,r,o,i);a||(e.position+=s);try{e.path&&ve.trackingDelegate.onWriteToFile&&ve.trackingDelegate.onWriteToFile(e.path)}catch(t){v("FS.trackingDelegate['onWriteToFile']('"+e.path+"') threw an exception: "+t.message)}return s},allocate:function(e,t,n){if(ve.isClosed(e))throw new ve.ErrnoError(8);if(t<0||n<=0)throw new ve.ErrnoError(28);if(0==(2097155&e.flags))throw new ve.ErrnoError(8);if(!ve.isFile(e.node.mode)&&!ve.isDir(e.node.mode))throw new ve.ErrnoError(43);if(!e.stream_ops.allocate)throw new ve.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap:function(e,t,n,r,o,i){if(0!=(2&o)&&0==(2&i)&&2!=(2097155&e.flags))throw new ve.ErrnoError(2);if(1==(2097155&e.flags))throw new ve.ErrnoError(2);if(!e.stream_ops.mmap)throw new ve.ErrnoError(43);return e.stream_ops.mmap(e,t,n,r,o,i)},msync:function(e,t,n,r,o){return e&&e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0},munmap:function(e){return 0},ioctl:function(e,t,n){if(!e.stream_ops.ioctl)throw new ve.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile:function(e,t){if((t=t||{}).flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var n,r=ve.open(e,t.flags),o=ve.stat(e).size,i=new Uint8Array(o);return ve.read(r,i,0,o,0),"utf8"===t.encoding?n=M(i,0):"binary"===t.encoding&&(n=i),ve.close(r),n},writeFile:function(e,t,n){(n=n||{}).flags=n.flags||577;var r=ve.open(e,n.flags,n.mode);if("string"==typeof t){var o=new Uint8Array(z(t)+1),i=R(t,o,0,o.length);ve.write(r,o,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ve.write(r,t,0,t.byteLength,void 0,n.canOwn)}ve.close(r)},cwd:function(){return ve.currentPath},chdir:function(e){var t=ve.lookupPath(e,{follow:!0});if(null===t.node)throw new ve.ErrnoError(44);if(!ve.isDir(t.node.mode))throw new ve.ErrnoError(54);var n=ve.nodePermissions(t.node,"x");if(n)throw new ve.ErrnoError(n);ve.currentPath=t.path},createDefaultDirectories:function(){ve.mkdir("/tmp"),ve.mkdir("/home"),ve.mkdir("/home/web_user")},createDefaultDevices:function(){ve.mkdir("/dev"),ve.registerDevice(ve.makedev(1,3),{read:function(){return 0},write:function(e,t,n,r,o){return r}}),ve.mkdev("/dev/null",ve.makedev(1,3)),me.register(ve.makedev(5,0),me.default_tty_ops),me.register(ve.makedev(6,0),me.default_tty1_ops),ve.mkdev("/dev/tty",ve.makedev(5,0)),ve.mkdev("/dev/tty1",ve.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}return function(){$("randomDevice")}}();ve.createDevice("/dev","random",e),ve.createDevice("/dev","urandom",e),ve.mkdir("/dev/shm"),ve.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){ve.mkdir("/proc");var e=ve.mkdir("/proc/self");ve.mkdir("/proc/self/fd"),ve.mount({mount:function(){var t=ve.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(e,t){var n=+t,r=ve.getStream(n);if(!r)throw new ve.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams:function(){e.stdin?ve.createDevice("/dev","stdin",e.stdin):ve.symlink("/dev/tty","/dev/stdin"),e.stdout?ve.createDevice("/dev","stdout",null,e.stdout):ve.symlink("/dev/tty","/dev/stdout"),e.stderr?ve.createDevice("/dev","stderr",null,e.stderr):ve.symlink("/dev/tty1","/dev/stderr"),ve.open("/dev/stdin",0),ve.open("/dev/stdout",1),ve.open("/dev/stderr",1)},ensureErrnoError:function(){ve.ErrnoError||(ve.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ve.ErrnoError.prototype=new Error,ve.ErrnoError.prototype.constructor=ve.ErrnoError,[44].forEach((function(e){ve.genericErrors[e]=new ve.ErrnoError(e),ve.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:function(){ve.ensureErrnoError(),ve.nameTable=new Array(4096),ve.mount(he,{},"/"),ve.createDefaultDirectories(),ve.createDefaultDevices(),ve.createSpecialDirectories(),ve.filesystems={MEMFS:he}},init:function(t,n,r){ve.init.initialized=!0,ve.ensureErrnoError(),e.stdin=t||e.stdin,e.stdout=n||e.stdout,e.stderr=r||e.stderr,ve.createStandardStreams()},quit:function(){ve.init.initialized=!1;var t=e._fflush;t&&t(0);for(var n=0;n<ve.streams.length;n++){var r=ve.streams[n];r&&ve.close(r)}},getMode:function(e,t){var n=0;return e&&(n|=365),t&&(n|=146),n},findObject:function(e,t){var n=ve.analyzePath(e,t);return n.exists?n.object:null},analyzePath:function(e,t){try{e=(r=ve.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=ve.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=fe.basename(e),r=ve.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath:function(e,t,n,r){e="string"==typeof e?e:ve.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=fe.join2(e,i);try{ve.mkdir(a)}catch(e){}e=a}}return a},createFile:function(e,t,n,r,o){var i=fe.join2("string"==typeof e?e:ve.getPath(e),t),a=ve.getMode(r,o);return ve.create(i,a)},createDataFile:function(e,t,n,r,o,i){var a=t?fe.join2("string"==typeof e?e:ve.getPath(e),t):e,s=ve.getMode(r,o),u=ve.create(a,s);if(n){if("string"==typeof n){for(var c=new Array(n.length),l=0,f=n.length;l<f;++l)c[l]=n.charCodeAt(l);n=c}ve.chmod(u,146|s);var d=ve.open(u,577);ve.write(d,n,0,n.length,0,i),ve.close(d),ve.chmod(u,s)}return u},createDevice:function(e,t,n,r){var o=fe.join2("string"==typeof e?e:ve.getPath(e),t),i=ve.getMode(!!n,!!r);ve.createDevice.major||(ve.createDevice.major=64);var a=ve.makedev(ve.createDevice.major++,0);return ve.registerDevice(a,{open:function(e){e.seekable=!1},close:function(e){r&&r.buffer&&r.buffer.length&&r(10)},read:function(e,t,r,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=n()}catch(e){throw new ve.ErrnoError(29)}if(void 0===u&&0===a)throw new ve.ErrnoError(6);if(null==u)break;a++,t[r+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,n,o,i){for(var a=0;a<o;a++)try{r(t[n+a])}catch(e){throw new ve.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}}),ve.mkdev(o,i,a)},forceLoadFile:function(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!a)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=xt(a(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ve.ErrnoError(29)}},createLazyFile:function(e,t,n,r,o){function i(){this.lengthKnown=!1,this.chunks=[]}if(i.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}},i.prototype.setDataGetter=function(e){this.getter=e},i.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=r);var s=this;s.setDataGetter((function(e){var t=e*a,o=(e+1)*a-1;if(o=Math.min(o,r-1),void 0===s.chunks[e]&&(s.chunks[e]=function(e,t){if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",n,!1),r!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+n+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):xt(o.responseText||"",!0)}(t,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!i&&r||(a=r=1,r=this.getter(0).length,a=r,h("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,url:n},s=ve.createFile(e,t,a,r,o);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var u={};return Object.keys(s.stream_ops).forEach((function(e){var t=s.stream_ops[e];u[e]=function(){return ve.forceLoadFile(s),t.apply(null,arguments)}})),u.read=function(e,t,n,r,o){ve.forceLoadFile(s);var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,r);if(i.slice)for(var u=0;u<a;u++)t[n+u]=i[o+u];else for(u=0;u<a;u++)t[n+u]=i.get(o+u);return a},s.stream_ops=u,s},createPreloadedFile:function(t,n,r,o,i,a,s,u,c,l){be.init();var f=n?de.resolve(fe.join2(t,n)):t;function d(r){function d(e){l&&l(),u||ve.createDataFile(t,n,e,o,i,c),a&&a(),X()}var m=!1;e.preloadPlugins.forEach((function(e){m||e.canHandle(f)&&(e.handle(r,f,d,(function(){s&&s(),X()})),m=!0)})),m||d(r)}q(),"string"==typeof r?be.asyncLoad(r,(function(e){d(e)}),s):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ve.indexedDB();try{var o=r.open(ve.DB_NAME(),ve.DB_VERSION)}catch(e){return n(e)}o.onupgradeneeded=function(){h("creating db"),o.result.createObjectStore(ve.DB_STORE_NAME)},o.onsuccess=function(){var r=o.result.transaction([ve.DB_STORE_NAME],"readwrite"),i=r.objectStore(ve.DB_STORE_NAME),a=0,s=0,u=e.length;function c(){0==s?t():n()}e.forEach((function(e){var t=i.put(ve.analyzePath(e).object.contents,e);t.onsuccess=function(){++a+s==u&&c()},t.onerror=function(){s++,a+s==u&&c()}})),r.onerror=n},o.onerror=n},loadFilesFromDB:function(e,t,n){t=t||function(){},n=n||function(){};var r=ve.indexedDB();try{var o=r.open(ve.DB_NAME(),ve.DB_VERSION)}catch(e){return n(e)}o.onupgradeneeded=n,o.onsuccess=function(){var r=o.result;try{var i=r.transaction([ve.DB_STORE_NAME],"readonly")}catch(e){return void n(e)}var a=i.objectStore(ve.DB_STORE_NAME),s=0,u=0,c=e.length;function l(){0==u?t():n()}e.forEach((function(e){var t=a.get(e);t.onsuccess=function(){ve.analyzePath(e).exists&&ve.unlink(e),ve.createDataFile(fe.dirname(e),fe.basename(e),t.result,!0,!0,!0),++s+u==c&&l()},t.onerror=function(){u++,s+u==c&&l()}})),i.onerror=n},o.onerror=n}},ye={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(e,t){if("/"!==t[0]){var n;if(-100===e)n=ve.cwd();else{var r=ve.getStream(e);if(!r)throw new ve.ErrnoError(8);n=r.path}t=fe.join2(n,t)}return t},doStat:function(e,t,n){try{var r=e(t)}catch(e){if(e&&e.node&&fe.normalize(t)!==fe.normalize(ve.getPath(e.node)))return-54;throw e}return D[n>>2]=r.dev,D[n+4>>2]=0,D[n+8>>2]=r.ino,D[n+12>>2]=r.mode,D[n+16>>2]=r.nlink,D[n+20>>2]=r.uid,D[n+24>>2]=r.gid,D[n+28>>2]=r.rdev,D[n+32>>2]=0,K=[r.size>>>0,(Q=r.size,+Math.abs(Q)>=1?Q>0?(0|Math.min(+Math.floor(Q/4294967296),4294967295))>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],D[n+40>>2]=K[0],D[n+44>>2]=K[1],D[n+48>>2]=4096,D[n+52>>2]=r.blocks,D[n+56>>2]=r.atime.getTime()/1e3|0,D[n+60>>2]=0,D[n+64>>2]=r.mtime.getTime()/1e3|0,D[n+68>>2]=0,D[n+72>>2]=r.ctime.getTime()/1e3|0,D[n+76>>2]=0,K=[r.ino>>>0,(Q=r.ino,+Math.abs(Q)>=1?Q>0?(0|Math.min(+Math.floor(Q/4294967296),4294967295))>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],D[n+80>>2]=K[0],D[n+84>>2]=K[1],0},doMsync:function(e,t,n,r,o){var i=C.slice(e,e+n);ve.msync(t,i,o,n,r)},doMkdir:function(e,t){return"/"===(e=fe.normalize(e))[e.length-1]&&(e=e.substr(0,e.length-1)),ve.mkdir(e,t,0),0},doMknod:function(e,t,n){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return ve.mknod(e,t,n),0},doReadlink:function(e,t,n){if(n<=0)return-28;var r=ve.readlink(e),o=Math.min(n,z(r)),i=x[t+o];return T(r,t,n+1),x[t+o]=i,o},doAccess:function(e,t){if(-8&t)return-28;var n;if(!(n=ve.lookupPath(e,{follow:!0}).node))return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&ve.nodePermissions(n,r)?-2:0},doDup:function(e,t,n){var r=ve.getStream(n);return r&&ve.close(r),ve.open(e,t,0,n,n).fd},doReadv:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=D[t+8*i>>2],s=D[t+(8*i+4)>>2],u=ve.read(e,x,a,s,r);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(e,t,n,r){for(var o=0,i=0;i<n;i++){var a=D[t+8*i>>2],s=D[t+(8*i+4)>>2],u=ve.write(e,x,a,s,r);if(u<0)return-1;o+=u}return o},varargs:void 0,get:function(){return ye.varargs+=4,D[ye.varargs-4>>2]},getStr:function(e){return P(e)},getStreamFromFD:function(e){var t=ve.getStream(e);if(!t)throw new ve.ErrnoError(8);return t},get64:function(e,t){return e}};function _e(e,t){if(be.mainLoop.timingMode=e,be.mainLoop.timingValue=t,!be.mainLoop.func)return 1;if(0==e)be.mainLoop.scheduler=function(){var e=0|Math.max(0,be.mainLoop.tickStartTime+t-ge());setTimeout(be.mainLoop.runner,e)},be.mainLoop.method="timeout";else if(1==e)be.mainLoop.scheduler=function(){be.requestAnimationFrame(be.mainLoop.runner)},be.mainLoop.method="rAF";else if(2==e){if("undefined"==typeof setImmediate){var n=[],r="setimmediate";addEventListener("message",(function(e){e.data!==r&&e.data.target!==r||(e.stopPropagation(),n.shift()())}),!0),setImmediate=function(e){n.push(e),postMessage(r,"*")}}be.mainLoop.scheduler=function(){setImmediate(be.mainLoop.runner)},be.mainLoop.method="immediate"}return 0}function we(e,t,n,r,o){p=!0,b(!be.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),be.mainLoop.func=e,be.mainLoop.arg=r;var i=be.mainLoop.currentlyRunningMainloop;if(be.mainLoop.runner=function(){if(!w)if(be.mainLoop.queue.length>0){var t=Date.now(),n=be.mainLoop.queue.shift();if(n.func(n.arg),be.mainLoop.remainingBlockers){var r=be.mainLoop.remainingBlockers,o=r%1==0?r-1:Math.floor(r);n.counted?be.mainLoop.remainingBlockers=o:(o+=.5,be.mainLoop.remainingBlockers=(8*r+o)/9)}if(console.log('main loop blocker "'+n.name+'" took '+(Date.now()-t)+" ms"),be.mainLoop.updateStatus(),i<be.mainLoop.currentlyRunningMainloop)return;setTimeout(be.mainLoop.runner,0)}else i<be.mainLoop.currentlyRunningMainloop||(be.mainLoop.currentFrameNumber=be.mainLoop.currentFrameNumber+1|0,1==be.mainLoop.timingMode&&be.mainLoop.timingValue>1&&be.mainLoop.currentFrameNumber%be.mainLoop.timingValue!=0?be.mainLoop.scheduler():(0==be.mainLoop.timingMode&&(be.mainLoop.tickStartTime=ge()),xe.newRenderingFrameStarted(),be.mainLoop.runIter(e),i<be.mainLoop.currentlyRunningMainloop||("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),be.mainLoop.scheduler())))},o||(t&&t>0?_e(0,1e3/t):_e(1,1),be.mainLoop.scheduler()),n)throw"unwind"}ge=function(){return performance.now()};var be={mainLoop:{scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){be.mainLoop.scheduler=null,be.mainLoop.currentlyRunningMainloop++},resume:function(){be.mainLoop.currentlyRunningMainloop++;var e=be.mainLoop.timingMode,t=be.mainLoop.timingValue,n=be.mainLoop.func;be.mainLoop.func=null,we(n,0,!1,be.mainLoop.arg,!0),_e(e,t),be.mainLoop.scheduler()},updateStatus:function(){if(e.setStatus){var t=e.statusMessage||"Please wait...",n=be.mainLoop.remainingBlockers,r=be.mainLoop.expectedBlockers;n?n<r?e.setStatus(t+" ("+(r-n)+"/"+r+")"):e.setStatus(t):e.setStatus("")}},runIter:function(t){if(!w){if(e.preMainLoop&&!1===e.preMainLoop())return;try{t()}catch(e){if(e instanceof Ot)return;if("unwind"==e)return;throw e&&"object"==typeof e&&e.stack&&v("exception thrown: "+[e,e.stack]),e}e.postMainLoop&&e.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(e.preloadPlugins||(e.preloadPlugins=[]),!be.initted){be.initted=!0;try{new Blob,be.hasBlobConstructor=!0}catch(e){be.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}be.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:be.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),be.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,e.noImageDecoding||void 0!==be.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),e.noImageDecoding=!0);var t={canHandle:function(t){return!e.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(t)},handle:function(t,n,r,o){var i=null;if(be.hasBlobConstructor)try{(i=new Blob([t],{type:be.getMimetype(n)})).size!==t.length&&(i=new Blob([new Uint8Array(t).buffer],{type:be.getMimetype(n)}))}catch(e){y("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!i){var a=new be.BlobBuilder;a.append(new Uint8Array(t).buffer),i=a.getBlob()}var s=be.URLObject.createObjectURL(i),u=new Image;u.onload=function(){b(u.complete,"Image "+n+" could not be decoded");var o=document.createElement("canvas");o.width=u.width,o.height=u.height,o.getContext("2d").drawImage(u,0,0),e.preloadedImages[n]=o,be.URLObject.revokeObjectURL(s),r&&r(t)},u.onerror=function(e){console.log("Image "+s+" could not be decoded"),o&&o()},u.src=s}};e.preloadPlugins.push(t);var n={canHandle:function(t){return!e.noAudioDecoding&&t.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(t,n,r,o){var i=!1;function a(o){i||(i=!0,e.preloadedAudios[n]=o,r&&r(t))}function s(){i||(i=!0,e.preloadedAudios[n]=new Audio,o&&o())}if(!be.hasBlobConstructor)return s();try{var u=new Blob([t],{type:be.getMimetype(n)})}catch(e){return s()}var c=be.URLObject.createObjectURL(u),l=new Audio;l.addEventListener("canplaythrough",(function(){a(l)}),!1),l.onerror=function(e){i||(console.log("warning: browser could not fully decode audio "+n+", trying slower base64 approach"),l.src="data:audio/x-"+n.substr(-3)+";base64,"+function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",r=0,o=0,i=0;i<e.length;i++)for(r=r<<8|e[i],o+=8;o>=6;){var a=r>>o-6&63;o-=6,n+=t[a]}return 2==o?(n+=t[(3&r)<<4],n+="=="):4==o&&(n+=t[(15&r)<<2],n+="="),n}(t),a(l))},l.src=c,be.safeSetTimeout((function(){a(l)}),1e4)}};e.preloadPlugins.push(n);var r=e.canvas;r&&(r.requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock||r.msRequestPointerLock||function(){},r.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},r.exitPointerLock=r.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",o,!1),document.addEventListener("mozpointerlockchange",o,!1),document.addEventListener("webkitpointerlockchange",o,!1),document.addEventListener("mspointerlockchange",o,!1),e.elementPointerLock&&r.addEventListener("click",(function(t){!be.pointerLock&&e.canvas.requestPointerLock&&(e.canvas.requestPointerLock(),t.preventDefault())}),!1))}function o(){be.pointerLock=document.pointerLockElement===e.canvas||document.mozPointerLockElement===e.canvas||document.webkitPointerLockElement===e.canvas||document.msPointerLockElement===e.canvas}},createContext:function(t,n,r,o){if(n&&e.ctx&&t==e.canvas)return e.ctx;var i,a;if(n){var s={antialias:!1,alpha:!1,majorVersion:1};if(o)for(var u in o)s[u]=o[u];void 0!==xe&&(a=xe.createContext(t,s))&&(i=xe.getContext(a).GLctx)}else i=t.getContext("2d");return i?(r&&(n||b(void 0===gt,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),e.ctx=i,n&&xe.makeContextCurrent(a),e.useWebGL=n,be.moduleContextCreatedCallbacks.forEach((function(e){e()})),be.init()),i):null},destroyContext:function(e,t,n){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(t,n){be.lockPointer=t,be.resizeCanvas=n,void 0===be.lockPointer&&(be.lockPointer=!0),void 0===be.resizeCanvas&&(be.resizeCanvas=!1);var r=e.canvas;function o(){be.isFullscreen=!1;var t=r.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t?(r.exitFullscreen=be.exitFullscreen,be.lockPointer&&r.requestPointerLock(),be.isFullscreen=!0,be.resizeCanvas?be.setFullscreenCanvasSize():be.updateCanvasDimensions(r)):(t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t),be.resizeCanvas?be.setWindowedCanvasSize():be.updateCanvasDimensions(r)),e.onFullScreen&&e.onFullScreen(be.isFullscreen),e.onFullscreen&&e.onFullscreen(be.isFullscreen)}be.fullscreenHandlersInstalled||(be.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",o,!1),document.addEventListener("mozfullscreenchange",o,!1),document.addEventListener("webkitfullscreenchange",o,!1),document.addEventListener("MSFullscreenChange",o,!1));var i=document.createElement("div");r.parentNode.insertBefore(i,r),i.appendChild(r),i.requestFullscreen=i.requestFullscreen||i.mozRequestFullScreen||i.msRequestFullscreen||(i.webkitRequestFullscreen?function(){i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(i.webkitRequestFullScreen?function(){i.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),i.requestFullscreen()},exitFullscreen:function(){return!!be.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(e){var t=Date.now();if(0===be.nextRAF)be.nextRAF=t+1e3/60;else for(;t+2>=be.nextRAF;)be.nextRAF+=1e3/60;var n=Math.max(be.nextRAF-t,0);setTimeout(e,n)},requestAnimationFrame:function(e){"function"!=typeof requestAnimationFrame?(0,be.fakeRequestAnimationFrame)(e):requestAnimationFrame(e)},safeCallback:function(e){return function(){if(!w)return e.apply(null,arguments)}},allowAsyncCallbacks:!0,queuedAsyncCallbacks:[],pauseAsyncCallbacks:function(){be.allowAsyncCallbacks=!1},resumeAsyncCallbacks:function(){if(be.allowAsyncCallbacks=!0,be.queuedAsyncCallbacks.length>0){var e=be.queuedAsyncCallbacks;be.queuedAsyncCallbacks=[],e.forEach((function(e){e()}))}},safeRequestAnimationFrame:function(e){return be.requestAnimationFrame((function(){w||(be.allowAsyncCallbacks?e():be.queuedAsyncCallbacks.push(e))}))},safeSetTimeout:function(e,t){return p=!0,setTimeout((function(){w||(be.allowAsyncCallbacks?e():be.queuedAsyncCallbacks.push(e))}),t)},safeSetInterval:function(e,t){return p=!0,setInterval((function(){w||be.allowAsyncCallbacks&&e()}),t)},getMimetype:function(e){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[e.substr(e.lastIndexOf(".")+1)]},getUserMedia:function(e){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(e)},getMovementX:function(e){return e.movementX||e.mozMovementX||e.webkitMovementX||0},getMovementY:function(e){return e.movementY||e.mozMovementY||e.webkitMovementY||0},getMouseWheelDelta:function(e){var t=0;switch(e.type){case"DOMMouseScroll":t=e.detail/3;break;case"mousewheel":t=e.wheelDelta/120;break;case"wheel":switch(t=e.deltaY,e.deltaMode){case 0:t/=100;break;case 1:t/=3;break;case 2:t*=80;break;default:throw"unrecognized mouse wheel delta mode: "+e.deltaMode}break;default:throw"unrecognized mouse wheel event: "+e.type}return t},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(t){if(be.pointerLock)"mousemove"!=t.type&&"mozMovementX"in t?be.mouseMovementX=be.mouseMovementY=0:(be.mouseMovementX=be.getMovementX(t),be.mouseMovementY=be.getMovementY(t)),"undefined"!=typeof SDL?(be.mouseX=SDL.mouseX+be.mouseMovementX,be.mouseY=SDL.mouseY+be.mouseMovementY):(be.mouseX+=be.mouseMovementX,be.mouseY+=be.mouseMovementY);else{var n=e.canvas.getBoundingClientRect(),r=e.canvas.width,o=e.canvas.height,i=void 0!==window.scrollX?window.scrollX:window.pageXOffset,a=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===t.type||"touchend"===t.type||"touchmove"===t.type){var s=t.touch;if(void 0===s)return;var u=s.pageX-(i+n.left),c=s.pageY-(a+n.top),l={x:u*=r/n.width,y:c*=o/n.height};if("touchstart"===t.type)be.lastTouches[s.identifier]=l,be.touches[s.identifier]=l;else if("touchend"===t.type||"touchmove"===t.type){var f=be.touches[s.identifier];f||(f=l),be.lastTouches[s.identifier]=f,be.touches[s.identifier]=l}return}var d=t.pageX-(i+n.left),m=t.pageY-(a+n.top);d*=r/n.width,m*=o/n.height,be.mouseMovementX=d-be.mouseX,be.mouseMovementY=m-be.mouseY,be.mouseX=d,be.mouseY=m}},asyncLoad:function(e,t,n,r){var o=r?"":"al "+e;s(e,(function(n){b(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),o&&X()}),(function(t){if(!n)throw'Loading data file "'+e+'" failed.';n()})),o&&q()},resizeListeners:[],updateResizeListeners:function(){var t=e.canvas;be.resizeListeners.forEach((function(e){e(t.width,t.height)}))},setCanvasSize:function(t,n,r){var o=e.canvas;be.updateCanvasDimensions(o,t,n),r||be.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var t=A[SDL.screen>>2];t|=8388608,D[SDL.screen>>2]=t}be.updateCanvasDimensions(e.canvas),be.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var t=A[SDL.screen>>2];t&=-8388609,D[SDL.screen>>2]=t}be.updateCanvasDimensions(e.canvas),be.updateResizeListeners()},updateCanvasDimensions:function(t,n,r){n&&r?(t.widthNative=n,t.heightNative=r):(n=t.widthNative,r=t.heightNative);var o=n,i=r;if(e.forcedAspectRatio&&e.forcedAspectRatio>0&&(o/i<e.forcedAspectRatio?o=Math.round(i*e.forcedAspectRatio):i=Math.round(o/e.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===t.parentNode&&"undefined"!=typeof screen){var a=Math.min(screen.width/o,screen.height/i);o=Math.round(o*a),i=Math.round(i*a)}be.resizeCanvas?(t.width!=o&&(t.width=o),t.height!=i&&(t.height=i),void 0!==t.style&&(t.style.removeProperty("width"),t.style.removeProperty("height"))):(t.width!=n&&(t.width=n),t.height!=r&&(t.height=r),void 0!==t.style&&(o!=n||i!=r?(t.style.setProperty("width",o+"px","important"),t.style.setProperty("height",i+"px","important")):(t.style.removeProperty("width"),t.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var e=be.nextWgetRequestHandle;return be.nextWgetRequestHandle++,e}},Ee={errorCode:12288,defaultDisplayInitialized:!1,currentContext:0,currentReadSurface:0,currentDrawSurface:0,contextAttributes:{alpha:!1,depth:!1,stencil:!1,antialias:!1},stringCache:{},setErrorCode:function(e){Ee.errorCode=e},chooseConfig:function(e,t,n,r,o){if(62e3!=e)return Ee.setErrorCode(12296),0;if(t)for(;;){var i=D[t>>2];if(12321==i){var a=D[t+4>>2];Ee.contextAttributes.alpha=a>0}else if(12325==i){var s=D[t+4>>2];Ee.contextAttributes.depth=s>0}else if(12326==i){var u=D[t+4>>2];Ee.contextAttributes.stencil=u>0}else if(12337==i){var c=D[t+4>>2];Ee.contextAttributes.antialias=c>0}else if(12338==i)c=D[t+4>>2],Ee.contextAttributes.antialias=1==c;else if(12544==i){var l=D[t+4>>2];Ee.contextAttributes.lowLatency=12547!=l}else if(12344==i)break;t+=8}return n&&r||o?(o&&(D[o>>2]=1),n&&r>0&&(D[n>>2]=62002),Ee.setErrorCode(12288),1):(Ee.setErrorCode(12300),0)}},xe={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},timerQueriesEXT:[],byteSizeByTypeRoot:5120,byteSizeByType:[1,1,2,2,4,4,4,2,3,4,8],programInfos:{},stringCache:{},unpackAlignment:4,recordError:function(e){xe.lastError||(xe.lastError=e)},getNewId:function(e){for(var t=xe.counter++,n=e.length;n<t;n++)e[n]=null;return t},MAX_TEMP_BUFFER_SIZE:2097152,numTempVertexBuffersPerSize:64,log2ceilLookup:function(e){return 32-Math.clz32(e-1)},generateTempBuffers:function(e,t){var n=xe.log2ceilLookup(xe.MAX_TEMP_BUFFER_SIZE);t.tempVertexBufferCounters1=[],t.tempVertexBufferCounters2=[],t.tempVertexBufferCounters1.length=t.tempVertexBufferCounters2.length=n+1,t.tempVertexBuffers1=[],t.tempVertexBuffers2=[],t.tempVertexBuffers1.length=t.tempVertexBuffers2.length=n+1,t.tempIndexBuffers=[],t.tempIndexBuffers.length=n+1;for(var r=0;r<=n;++r){t.tempIndexBuffers[r]=null,t.tempVertexBufferCounters1[r]=t.tempVertexBufferCounters2[r]=0;var o=xe.numTempVertexBuffersPerSize;t.tempVertexBuffers1[r]=[],t.tempVertexBuffers2[r]=[];var i=t.tempVertexBuffers1[r],a=t.tempVertexBuffers2[r];i.length=a.length=o;for(var s=0;s<o;++s)i[s]=a[s]=null}if(e){t.tempQuadIndexBuffer=gt.createBuffer(),t.GLctx.bindBuffer(34963,t.tempQuadIndexBuffer);for(var u=xe.MAX_TEMP_BUFFER_SIZE>>1,c=new Uint16Array(u),l=(r=0,0);c[r++]=l,!(r>=u||(c[r++]=l+1,r>=u)||(c[r++]=l+2,r>=u)||(c[r++]=l,r>=u)||(c[r++]=l+2,r>=u)||(c[r++]=l+3,r>=u));)l+=4;t.GLctx.bufferData(34963,c,35044),t.GLctx.bindBuffer(34963,null)}},getTempVertexBuffer:function(e){var t=xe.log2ceilLookup(e),n=xe.currentContext.tempVertexBuffers1[t],r=xe.currentContext.tempVertexBufferCounters1[t];xe.currentContext.tempVertexBufferCounters1[t]=xe.currentContext.tempVertexBufferCounters1[t]+1&xe.numTempVertexBuffersPerSize-1;var o=n[r];if(o)return o;var i=gt.getParameter(34964);return n[r]=gt.createBuffer(),gt.bindBuffer(34962,n[r]),gt.bufferData(34962,1<<t,35048),gt.bindBuffer(34962,i),n[r]},getTempIndexBuffer:function(e){var t=xe.log2ceilLookup(e),n=xe.currentContext.tempIndexBuffers[t];if(n)return n;var r=gt.getParameter(34965);return xe.currentContext.tempIndexBuffers[t]=gt.createBuffer(),gt.bindBuffer(34963,xe.currentContext.tempIndexBuffers[t]),gt.bufferData(34963,1<<t,35048),gt.bindBuffer(34963,r),xe.currentContext.tempIndexBuffers[t]},newRenderingFrameStarted:function(){if(xe.currentContext){var e=xe.currentContext.tempVertexBuffers1;xe.currentContext.tempVertexBuffers1=xe.currentContext.tempVertexBuffers2,xe.currentContext.tempVertexBuffers2=e,e=xe.currentContext.tempVertexBufferCounters1,xe.currentContext.tempVertexBufferCounters1=xe.currentContext.tempVertexBufferCounters2,xe.currentContext.tempVertexBufferCounters2=e;for(var t=xe.log2ceilLookup(xe.MAX_TEMP_BUFFER_SIZE),n=0;n<=t;++n)xe.currentContext.tempVertexBufferCounters1[n]=0}},getSource:function(e,t,n,r){for(var o="",i=0;i<t;++i){var a=r?D[r+4*i>>2]:-1;o+=P(D[n+4*i>>2],a<0?void 0:a)}return o},calcBufLength:function(e,t,n,r){return n>0?r*n:e*xe.byteSizeByType[t-xe.byteSizeByTypeRoot]*r},usedTempBuffers:[],preDrawHandleClientVertexAttribBindings:function(e){xe.resetBufferBinding=!1;for(var t=0;t<xe.currentContext.maxVertexAttribs;++t){var n=xe.currentContext.clientBuffers[t];if(n.clientside&&n.enabled){xe.resetBufferBinding=!0;var r=xe.calcBufLength(n.size,n.type,n.stride,e),o=xe.getTempVertexBuffer(r);gt.bindBuffer(34962,o),gt.bufferSubData(34962,0,C.subarray(n.ptr,n.ptr+r)),n.vertexAttribPointerAdaptor.call(gt,t,n.size,n.type,n.normalized,n.stride,0)}}},postDrawHandleClientVertexAttribBindings:function(){xe.resetBufferBinding&&gt.bindBuffer(34962,xe.buffers[gt.currentArrayBufferBinding])},createContext:function(e,t){var n=e.getContext("webgl",t);return n?xe.registerContext(n,t):0},registerContext:function(e,t){var n=xe.getNewId(xe.contexts),r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};e.canvas&&(e.canvas.GLctxObject=r),xe.contexts[n]=r,(void 0===t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&xe.initExtensions(r),r.maxVertexAttribs=r.GLctx.getParameter(34921),r.clientBuffers=[];for(var o=0;o<r.maxVertexAttribs;o++)r.clientBuffers[o]={enabled:!1,clientside:!1,size:0,type:0,normalized:0,stride:0,ptr:0,vertexAttribPointerAdaptor:null};return xe.generateTempBuffers(!1,r),n},makeContextCurrent:function(t){return xe.currentContext=xe.contexts[t],e.ctx=gt=xe.currentContext&&xe.currentContext.GLctx,!(t&&!gt)},getContext:function(e){return xe.contexts[e]},deleteContext:function(e){xe.currentContext===xe.contexts[e]&&(xe.currentContext=null),"object"==typeof Ce&&Ce.removeAllHandlersOnTarget(xe.contexts[e].GLctx.canvas),xe.contexts[e]&&xe.contexts[e].GLctx.canvas&&(xe.contexts[e].GLctx.canvas.GLctxObject=void 0),xe.contexts[e]=null},initExtensions:function(e){if(e||(e=xe.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,n=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");t&&(e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,o){t.drawArraysInstancedANGLE(e,n,r,o)},e.drawElementsInstanced=function(e,n,r,o,i){t.drawElementsInstancedANGLE(e,n,r,o,i)})}(n),function(e){var t=e.getExtension("OES_vertex_array_object");t&&(e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)})}(n),function(e){var t=e.getExtension("WEBGL_draw_buffers");t&&(e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)})}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(t=n).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(e){e.indexOf("lose_context")<0&&e.indexOf("debug")<0&&n.getExtension(e)}))}},populateUniformTable:function(e){for(var t=xe.programs[e],n=xe.programInfos[e]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},r=n.uniforms,o=gt.getProgramParameter(t,35718),i=0;i<o;++i){var a=gt.getActiveUniform(t,i),s=a.name;n.maxUniformLength=Math.max(n.maxUniformLength,s.length+1),"]"==s.slice(-1)&&(s=s.slice(0,s.lastIndexOf("[")));var u=gt.getUniformLocation(t,s);if(u){var c=xe.getNewId(xe.uniforms);r[s]=[a.size,c],xe.uniforms[c]=u;for(var l=1;l<a.size;++l){var f=s+"["+l+"]";u=gt.getUniformLocation(t,f),c=xe.getNewId(xe.uniforms),xe.uniforms[c]=u}}}}},Ce={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ce.eventHandlers.length-1;e>=0;--e)Ce._removeHandler(e);Ce.eventHandlers=[],Ce.deferredCalls=[]},registerRemoveEventListeners:function(){Ce.removeEventListenersRegistered||(Ce.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var o in Ce.deferredCalls){var i=Ce.deferredCalls[o];if(i.targetFunction==e&&r(i.argsList,n))return}Ce.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ce.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ce.deferredCalls.length;++t)Ce.deferredCalls[t].targetFunction==e&&(Ce.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ce.inEventHandler&&Ce.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ce.canPerformEventHandlerRequests())for(var e=0;e<Ce.deferredCalls.length;++e){var t=Ce.deferredCalls[e];Ce.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target!=e||t&&t!=Ce.eventHandlers[n].eventTypeString||Ce._removeHandler(n--)},_removeHandler:function(e){var t=Ce.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ce.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Ce.inEventHandler,Ce.currentEventHandler=e,Ce.runDeferredCalls(),e.handlerFunc(t),Ce.runDeferredCalls(),--Ce.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ce.eventHandlers.push(e),Ce.registerRemoveEventListeners();else for(var n=0;n<Ce.eventHandlers.length;++n)Ce.eventHandlers[n].target==e.target&&Ce.eventHandlers[n].eventTypeString==e.eventTypeString&&Ce._removeHandler(n--)},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},ke={},Se=[0,document,window];function De(e){var t;return e=(t=e)>2?P(t):t,Se[e]||document.querySelector(e)}function Ae(e){return De(e)}function Le(e){var t=Bt(),n=Pt(8),r=n+4,o=Pt(e.id.length+1);T(e.id,o,e.id.length+1),function(e,t,n){var r=Ae(e);if(!r)return-4;D[t>>2]=r.width,D[n>>2]=r.height}(o,n,r);var i=[D[n>>2],D[r>>2]];return Mt(t),i}function Fe(e,t,n){var r=Ae(e);return r?(r.width=t,r.height=n,0):-4}function Be(e,t,n){if(e.controlTransferredOffscreen){var r=Bt(),o=Pt(e.id.length+1);T(e.id,o,e.id.length+1),Fe(o,t,n),Mt(r)}else e.width=t,e.height=n}function Me(e,t,n){e.style.paddingLeft=e.style.paddingRight=n+"px",e.style.paddingTop=e.style.paddingBottom=t+"px"}function Pe(e){return Se.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0}}function Re(e,t){var n=function(e){var t=Le(e),n=t[0],r=t[1],o=e.style.width,i=e.style.height,a=e.style.backgroundColor,s=document.body.style.backgroundColor,u=e.style.paddingLeft,c=e.style.paddingRight,l=e.style.paddingTop,f=e.style.paddingBottom,d=e.style.marginLeft,m=e.style.marginRight,p=e.style.marginTop,g=e.style.marginBottom,h=document.body.style.margin,v=document.documentElement.style.overflow,y=document.body.scroll,_=e.style.imageRendering;function w(){var t;document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(document.removeEventListener("fullscreenchange",w),document.removeEventListener("webkitfullscreenchange",w),Be(e,n,r),e.style.width=o,e.style.height=i,e.style.backgroundColor=a,s||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=s,e.style.paddingLeft=u,e.style.paddingRight=c,e.style.paddingTop=l,e.style.paddingBottom=f,e.style.marginLeft=d,e.style.marginRight=m,e.style.marginTop=p,e.style.marginBottom=g,document.body.style.margin=h,document.documentElement.style.overflow=v,document.body.scroll=y,e.style.imageRendering=_,e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,n,r),ke.canvasResizedCallback&&(t=ke.canvasResizedCallbackUserData,Tt.apply(null,[ke.canvasResizedCallback,37,0,t])))}return document.addEventListener("fullscreenchange",w),document.addEventListener("webkitfullscreenchange",w),w}(e),r=t.softFullscreen?innerWidth:screen.width,o=t.softFullscreen?innerHeight:screen.height,i=Pe(e),a=i.width,s=i.height,u=Le(e),c=u[0],l=u[1];if(3==t.scaleMode)Me(e,(o-s)/2,(r-a)/2),r=a,o=s;else if(2==t.scaleMode)if(r*l<c*o){var f=l*r/c;Me(e,(o-f)/2,0),o=f}else{var d=c*o/l;Me(e,0,(r-d)/2),r=d}e.style.backgroundColor||(e.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),e.style.width=r+"px",e.style.height=o+"px",1==t.filteringMode&&(e.style.imageRendering="optimizeSpeed",e.style.imageRendering="-moz-crisp-edges",e.style.imageRendering="-o-crisp-edges",e.style.imageRendering="-webkit-optimize-contrast",e.style.imageRendering="optimize-contrast",e.style.imageRendering="crisp-edges",e.style.imageRendering="pixelated");var m=2==t.canvasResolutionScaleMode?devicePixelRatio:1;if(0!=t.canvasResolutionScaleMode){var p=r*m|0,g=o*m|0;Be(e,p,g),e.GLctxObject&&e.GLctxObject.GLctx.viewport(0,0,p,g)}return n}function Te(e,t){if(0==t.scaleMode&&0==t.canvasResolutionScaleMode||Re(e,t),e.requestFullscreen)e.requestFullscreen();else{if(!e.webkitRequestFullscreen)return Ce.fullscreenEnabled()?-3:-1;e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var n;return ke=t,t.canvasResizedCallback&&(n=t.canvasResizedCallbackUserData,Tt.apply(null,[t.canvasResizedCallback,37,0,n])),0}function ze(e){if(e.requestPointerLock)e.requestPointerLock();else{if(!e.msRequestPointerLock)return document.body.requestPointerLock||document.body.msRequestPointerLock?-3:-1;e.msRequestPointerLock()}return 0}function Oe(e,t){F[e>>3]=t.timestamp;for(var n=0;n<t.axes.length;++n)F[e+8*n+16>>3]=t.axes[n];for(n=0;n<t.buttons.length;++n)"object"==typeof t.buttons[n]?F[e+8*n+528>>3]=t.buttons[n].value:F[e+8*n+528>>3]=t.buttons[n];for(n=0;n<t.buttons.length;++n)"object"==typeof t.buttons[n]?D[e+4*n+1040>>2]=t.buttons[n].pressed:D[e+4*n+1040>>2]=1==t.buttons[n];D[e+1296>>2]=t.connected,D[e+1300>>2]=t.index,D[e+8>>2]=t.axes.length,D[e+12>>2]=t.buttons.length,T(t.id,e+1304,64),T(t.mapping,e+1368,64)}var Ie=[];function Ne(e,t,n,r){for(var o=0;o<e;o++){var i=gt[n](),a=i&&xe.getNewId(r);i?(i.name=a,r[a]=i):xe.recordError(1282),D[t+4*o>>2]=a}}function Ge(e,t,n,r,o,i,a,s){t=xe.programs[t];var u=gt[e](t,n);if(u){var c=s&&T(u.name,s,r);o&&(D[o>>2]=c),i&&(D[i>>2]=u.size),a&&(D[a>>2]=u.type)}}function Ue(e,t){A[e>>2]=t,A[e+4>>2]=(t-A[e>>2])/4294967296}function je(e,t,n){if(t){var r=void 0;switch(e){case 36346:r=1;break;case 36344:return void(0!=n&&1!=n&&xe.recordError(1280));case 36345:r=0;break;case 34466:var o=gt.getParameter(34467);r=o?o.length:0}if(void 0===r){var i=gt.getParameter(e);switch(typeof i){case"number":r=i;break;case"boolean":r=i?1:0;break;case"string":return void xe.recordError(1280);case"object":if(null===i)switch(e){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:r=0;break;default:return void xe.recordError(1280)}else{if(i instanceof Float32Array||i instanceof Uint32Array||i instanceof Int32Array||i instanceof Array){for(var a=0;a<i.length;++a)switch(n){case 0:D[t+4*a>>2]=i[a];break;case 2:L[t+4*a>>2]=i[a];break;case 4:x[t+a>>0]=i[a]?1:0}return}try{r=0|i.name}catch(t){return xe.recordError(1280),void v("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+e+")! (error: "+t+")")}}break;default:return xe.recordError(1280),void v("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+e+") and it returns "+i+" of type "+typeof i+"!")}}switch(n){case 1:Ue(t,r);break;case 0:D[t>>2]=r;break;case 2:L[t>>2]=r;break;case 4:x[t>>0]=r?1:0}}else xe.recordError(1281)}function Ve(e){var t=z(e)+1,n=At(t);return T(e,n,t),n}function He(e){return parseInt(e)}function qe(e,t,n,r){if(n){var o=gt.getUniform(xe.programs[e],xe.uniforms[t]);if("number"==typeof o||"boolean"==typeof o)switch(r){case 0:D[n>>2]=o;break;case 2:L[n>>2]=o}else for(var i=0;i<o.length;i++)switch(r){case 0:D[n+4*i>>2]=o[i];break;case 2:L[n+4*i>>2]=o[i]}}else xe.recordError(1281)}function Xe(e,t,n,r){if(n){xe.currentContext.clientBuffers[e].enabled&&v("glGetVertexAttrib*v on client-side array: not supported, bad data returned");var o=gt.getVertexAttrib(e,t);if(34975==t)D[n>>2]=o&&o.name;else if("number"==typeof o||"boolean"==typeof o)switch(r){case 0:D[n>>2]=o;break;case 2:L[n>>2]=o;break;case 5:D[n>>2]=Math.fround(o)}else for(var i=0;i<o.length;i++)switch(r){case 0:D[n+4*i>>2]=o[i];break;case 2:L[n+4*i>>2]=o[i];break;case 5:D[n+4*i>>2]=Math.fround(o[i])}}else xe.recordError(1281)}function $e(e,t,n,r,o,i){var a=function(e){return 1==(e-=5120)?C:4==e?D:6==e?L:5==e||28922==e?A:S}(e),s=function(e){return 31-Math.clz32(e.BYTES_PER_ELEMENT)}(a),u=1<<s,c=function(e,t,n,r){var o;return t*(e*n+(o=r)-1&-o)}(n,r,function(e){return{5:3,6:4,8:2,29502:3,29504:4}[e-6402]||1}(t)*u,xe.unpackAlignment);return a.subarray(o>>s,o+c>>s)}var We=[],Ye=[];function Qe(e,t,n,r,o,i,a){Ce.focusEvent||(Ce.focusEvent=At(256));var s={target:De(e),eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s=e||event,u=Ce.getNodeNameForTarget(s.target),c=s.target.id?s.target.id:"",l=Ce.focusEvent;T(u,l+0,128),T(c,l+128,128),n=o,i=l,a=t,void Tt.apply(null,[r,n,i,a])&&s.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function Ke(e,t,n,r,o,i,a){Ce.fullscreenChangeEvent||(Ce.fullscreenChangeEvent=At(280));var s={target:e,eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s=e||event,u=Ce.fullscreenChangeEvent;!function(e){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,n=!!t;D[e>>2]=n,D[e+4>>2]=Ce.fullscreenEnabled();var r=n?t:Ce.previousFullscreenElement,o=Ce.getNodeNameForTarget(r),i=r&&r.id?r.id:"";T(o,e+8,128),T(i,e+136,128),D[e+264>>2]=r?r.clientWidth:0,D[e+268>>2]=r?r.clientHeight:0,D[e+272>>2]=screen.width,D[e+276>>2]=screen.height,n&&(Ce.previousFullscreenElement=t)}(u),n=o,i=u,a=t,void Tt.apply(null,[r,n,i,a])&&s.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function Je(e,t,n,r,o,i,a){Ce.gamepadEvent||(Ce.gamepadEvent=At(1432));var s={target:De(e),allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s=e||event,u=Ce.gamepadEvent;Oe(u,s.gamepad),n=o,i=u,a=t,void Tt.apply(null,[r,n,i,a])&&s.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function Ze(e,t,n,r,o,i,a){Ce.keyEvent||(Ce.keyEvent=At(164));var s={target:De(e),allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s=Ce.keyEvent,u=s>>2;D[u+0]=e.location,D[u+1]=e.ctrlKey,D[u+2]=e.shiftKey,D[u+3]=e.altKey,D[u+4]=e.metaKey,D[u+5]=e.repeat,D[u+6]=e.charCode,D[u+7]=e.keyCode,D[u+8]=e.which,T(e.key||"",s+36,32),T(e.code||"",s+68,32),T(e.char||"",s+100,32),T(e.locale||"",s+132,32),n=o,i=s,a=t,void Tt.apply(null,[r,n,i,a])&&e.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function et(e,t,n){var r=e>>2;D[r+0]=t.screenX,D[r+1]=t.screenY,D[r+2]=t.clientX,D[r+3]=t.clientY,D[r+4]=t.ctrlKey,D[r+5]=t.shiftKey,D[r+6]=t.altKey,D[r+7]=t.metaKey,k[2*r+16]=t.button,k[2*r+17]=t.buttons,D[r+9]=t.movementX,D[r+10]=t.movementY;var o=Pe(n);D[r+11]=t.clientX-o.left,D[r+12]=t.clientY-o.top}function tt(e,t,n,r,o,i,a){Ce.mouseEvent||(Ce.mouseEvent=At(64));var s={target:e=De(e),allowsDeferredCalls:"mousemove"!=i&&"mouseenter"!=i&&"mouseleave"!=i,eventTypeString:i,callbackfunc:r,handlerFunc:function(n){var i,a,s,u=n||event;et(Ce.mouseEvent,u,e),i=o,a=Ce.mouseEvent,s=t,void Tt.apply(null,[r,i,a,s])&&u.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function nt(e,t,n,r,o,i,a){Ce.pointerlockChangeEvent||(Ce.pointerlockChangeEvent=At(260));var s={target:e,eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s=e||event,u=Ce.pointerlockChangeEvent;!function(e){var t=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,n=!!t;D[e>>2]=n;var r=Ce.getNodeNameForTarget(t),o=t&&t.id?t.id:"";T(r,e+4,128),T(o,e+132,128)}(u),n=o,i=u,a=t,void Tt.apply(null,[r,n,i,a])&&s.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function rt(e,t,n,r,o,i,a){Ce.touchEvent||(Ce.touchEvent=At(1684));var s={target:e=De(e),allowsDeferredCalls:"touchstart"==i||"touchend"==i,eventTypeString:i,callbackfunc:r,handlerFunc:function(n){for(var i={},a=n.touches,s=0;s<a.length;++s)i[(u=a[s]).identifier]=u;for(a=n.changedTouches,s=0;s<a.length;++s){var u;(u=a[s]).isChanged=1,i[u.identifier]=u}for(a=n.targetTouches,s=0;s<a.length;++s)i[a[s].identifier].onTarget=1;var c=Ce.touchEvent,l=c>>2;D[l+1]=n.ctrlKey,D[l+2]=n.shiftKey,D[l+3]=n.altKey,D[l+4]=n.metaKey,l+=5;var f,d,m,p=Pe(e),g=0;for(var s in i){var h=i[s];if(D[l+0]=h.identifier,D[l+1]=h.screenX,D[l+2]=h.screenY,D[l+3]=h.clientX,D[l+4]=h.clientY,D[l+5]=h.pageX,D[l+6]=h.pageY,D[l+7]=h.isChanged,D[l+8]=h.onTarget,D[l+9]=h.clientX-p.left,D[l+10]=h.clientY-p.top,l+=13,++g>31)break}D[c>>2]=g,f=o,d=c,m=t,void Tt.apply(null,[r,f,d,m])&&n.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}function ot(e,t,n,r,o,i,a){Ce.visibilityChangeEvent||(Ce.visibilityChangeEvent=At(8));var s={target:e,eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a,s,u,c=e||event,l=Ce.visibilityChangeEvent;n=l,i=["hidden","visible","prerender","unloaded"].indexOf(document.visibilityState),D[n>>2]=document.hidden,D[n+4>>2]=i,a=o,s=l,u=t,void Tt.apply(null,[r,a,s,u])&&c.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}var it={};function at(){if(!at.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in it)e[t]=it[t];var n=[];for(var t in e)n.push(t+"="+e[t]);at.strings=n}return at.strings}function st(e){return e%4==0&&(e%100!=0||e%400==0)}function ut(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ct=[31,29,31,30,31,30,31,31,30,31,30,31],lt=[31,28,31,30,31,30,31,31,30,31,30,31];function ft(e,t){for(var n=new Date(e.getTime());t>0;){var r=st(n.getFullYear()),o=n.getMonth(),i=(r?ct:lt)[o];if(!(t>i-n.getDate()))return n.setDate(n.getDate()+t),n;t-=i-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function dt(e,t,n,r){var o=D[r+40>>2],i={tm_sec:D[r>>2],tm_min:D[r+4>>2],tm_hour:D[r+8>>2],tm_mday:D[r+12>>2],tm_mon:D[r+16>>2],tm_year:D[r+20>>2],tm_wday:D[r+24>>2],tm_yday:D[r+28>>2],tm_isdst:D[r+32>>2],tm_gmtoff:D[r+36>>2],tm_zone:o?P(o):""},a=P(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(e,t,n){for(var r="number"==typeof e?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function d(e,t){return f(e,t,"0")}function m(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return 0===(r=n(e.getFullYear()-t.getFullYear()))&&0===(r=n(e.getMonth()-t.getMonth()))&&(r=n(e.getDate()-t.getDate())),r}function p(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=ft(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=p(n),i=p(r);return m(o,t)<=0?m(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var h={"%a":function(e){return c[e.tm_wday].substring(0,3)},"%A":function(e){return c[e.tm_wday]},"%b":function(e){return l[e.tm_mon].substring(0,3)},"%B":function(e){return l[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return f(e.tm_mday,2," ")},"%g":function(e){return g(e).toString().substring(2)},"%G":function(e){return g(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+ut(st(e.tm_year+1900)?ct:lt,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=new Date(e.tm_year+1900,0,1),n=0===t.getDay()?t:ft(t,7-t.getDay()),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(n,r)<0){var o=ut(st(r.getFullYear())?ct:lt,r.getMonth()-1)-31,i=31-n.getDate()+o+r.getDate();return d(Math.ceil(i/7),2)}return 0===m(n,t)?"01":"00"},"%V":function(e){var t,n=new Date(e.tm_year+1900,0,4),r=new Date(e.tm_year+1901,0,4),o=p(n),i=p(r),a=ft(new Date(e.tm_year+1900,0,1),e.tm_yday);return m(a,o)<0?"53":m(i,a)<=0?"01":(t=o.getFullYear()<e.tm_year+1900?e.tm_yday+32-o.getDate():e.tm_yday+1-o.getDate(),d(Math.ceil(t/7),2))},"%w":function(e){return e.tm_wday},"%W":function(e){var t=new Date(e.tm_year,0,1),n=1===t.getDay()?t:ft(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(e.tm_year+1900,e.tm_mon,e.tm_mday);if(m(n,r)<0){var o=ut(st(r.getFullYear())?ct:lt,r.getMonth()-1)-31,i=31-n.getDate()+o+r.getDate();return d(Math.ceil(i/7),2)}return 0===m(n,t)?"01":"00"},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,n=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(n?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var u in h)a.indexOf(u)>=0&&(a=a.replace(new RegExp(u,"g"),h[u](i)));var v=xt(a,!1);return v.length>t?0:(function(e,t){x.set(e,t)}(v,e),v.length-1)}var mt=[];function pt(e){try{return e()}catch(e){$(e)}}var gt,ht={State:{Normal:0,Unwinding:1,Rewinding:2},state:0,StackSize:4096,currData:null,handleSleepReturnValue:0,exportCallStack:[],callStackNameToId:{},callStackIdToName:{},callStackId:0,afterUnwind:null,asyncFinalizers:[],sleepCallbacks:[],getCallStackId:function(e){var t=ht.callStackNameToId[e];return void 0===t&&(t=ht.callStackId++,ht.callStackNameToId[e]=t,ht.callStackIdToName[t]=e),t},instrumentWasmExports:function(e){var t={};for(var n in e)!function(n){var r=e[n];t[n]="function"==typeof r?function(){ht.exportCallStack.push(n);try{return r.apply(null,arguments)}finally{if(w)return;var e=ht.exportCallStack.pop();b(e===n),ht.maybeStopUnwind()}}:r}(n);return t},maybeStopUnwind:function(){ht.currData&&ht.state===ht.State.Unwinding&&0===ht.exportCallStack.length&&(ht.state=ht.State.Normal,pt(e._asyncify_stop_unwind),"undefined"!=typeof Fibers&&Fibers.trampoline(),ht.afterUnwind&&(ht.afterUnwind(),ht.afterUnwind=null))},allocateData:function(){var e=At(12+ht.StackSize);return ht.setDataHeader(e,e+12,ht.StackSize),ht.setDataRewindFunc(e),e},setDataHeader:function(e,t,n){D[e>>2]=t,D[e+4>>2]=t+n},setDataRewindFunc:function(e){var t=ht.exportCallStack[0],n=ht.getCallStackId(t);D[e+8>>2]=n},getDataRewindFunc:function(t){var n=D[t+8>>2],r=ht.callStackIdToName[n];return e.asm[r]},handleSleep:function(t){if(!w){if(p=!0,ht.state===ht.State.Normal){var n=!1,r=!1;t((function(t){if(!w&&(ht.handleSleepReturnValue=t||0,n=!0,r)){ht.state=ht.State.Rewinding,pt((function(){e._asyncify_start_rewind(ht.currData)})),void 0!==be&&be.mainLoop.func&&be.mainLoop.resume();var o=ht.getDataRewindFunc(ht.currData)();if(!ht.currData){var i=ht.asyncFinalizers;ht.asyncFinalizers=[],i.forEach((function(e){e(o)}))}}})),r=!0,n||(ht.state=ht.State.Unwinding,ht.currData=ht.allocateData(),pt((function(){e._asyncify_start_unwind(ht.currData)})),void 0!==be&&be.mainLoop.func&&be.mainLoop.pause())}else ht.state===ht.State.Rewinding?(ht.state=ht.State.Normal,pt(e._asyncify_stop_rewind),Dt(ht.currData),ht.currData=null,ht.sleepCallbacks.forEach((function(e){e()}))):$("invalid state: "+ht.state);return ht.handleSleepReturnValue}},handleAsync:function(e){return ht.handleSleep((function(t){e().then(t)}))}},vt=function(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ve.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r},yt=365,_t=146;Object.defineProperties(vt.prototype,{read:{get:function(){return(this.mode&yt)===yt},set:function(e){e?this.mode|=yt:this.mode&=-366}},write:{get:function(){return(this.mode&_t)===_t},set:function(e){e?this.mode|=_t:this.mode&=-147}},isFolder:{get:function(){return ve.isDir(this.mode)}},isDevice:{get:function(){return ve.isChrdev(this.mode)}}}),ve.FSNode=vt,ve.staticInit(),e.requestFullscreen=function(e,t){be.requestFullscreen(e,t)},e.requestAnimationFrame=function(e){be.requestAnimationFrame(e)},e.setCanvasSize=function(e,t,n){be.setCanvasSize(e,t,n)},e.pauseMainLoop=function(){be.mainLoop.pause()},e.resumeMainLoop=function(){be.mainLoop.resume()},e.getUserMedia=function(){be.getUserMedia()},e.createContext=function(e,t,n,r){return be.createContext(e,t,n,r)};for(var wt=0;wt<32;++wt)Ie.push(new Array(wt));var bt=new Float32Array(288);for(wt=0;wt<288;++wt)We[wt]=bt.subarray(0,wt+1);var Et=new Int32Array(288);for(wt=0;wt<288;++wt)Ye[wt]=Et.subarray(0,wt+1);function xt(e,t,n){var r=n>0?n:z(e)+1,o=new Array(r),i=R(e,o,0,o.length);return t&&(o.length=i),o}var Ct,kt={__cxa_allocate_exception:function(e){return At(e+ue)+ue},__cxa_atexit:function(e,t){},__cxa_throw:function(e,t,n){throw new ce(e).init(t,n),e},__sys_fcntl64:function(e,t,n){ye.varargs=n;try{var r=ye.getStreamFromFD(e);switch(t){case 0:return(o=ye.get())<0?-28:ve.open(r.path,r.flags,0,o).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:var o=ye.get();return r.flags|=o,0;case 12:return o=ye.get(),k[o+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return le(28),-1;default:return-28}}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),-e.errno}},__sys_ioctl:function(e,t,n){ye.varargs=n;try{var r=ye.getStreamFromFD(e);switch(t){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:if(!r.tty)return-59;var o=ye.get();return D[o>>2]=0,0;case 21520:return r.tty?-28:-59;case 21531:return o=ye.get(),ve.ioctl(r,t,o);case 21523:case 21524:return r.tty?0:-59;default:$("bad ioctl syscall "+t)}}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),-e.errno}},__sys_open:function(e,t,n){ye.varargs=n;try{var r=ye.getStr(e),o=n?ye.get():0;return ve.open(r,t,o).fd}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),-e.errno}},abort:function(){$()},clock_gettime:function(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return le(28),-1;n=ge()}return D[t>>2]=n/1e3|0,D[t+4>>2]=n%1e3*1e3*1e3|0,0},dlclose:function(e){$("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")},eglBindAPI:function(e){return 12448==e?(Ee.setErrorCode(12288),1):(Ee.setErrorCode(12300),0)},eglChooseConfig:function(e,t,n,r,o){return Ee.chooseConfig(e,t,n,r,o)},eglCreateContext:function(t,n,r,o){if(62e3!=t)return Ee.setErrorCode(12296),0;for(var i=1;;){var a=D[o>>2];if(12440!=a){if(12344==a)break;return Ee.setErrorCode(12292),0}i=D[o+4>>2],o+=8}return 2!=i?(Ee.setErrorCode(12293),0):(Ee.contextAttributes.majorVersion=i-1,Ee.contextAttributes.minorVersion=0,Ee.context=xe.createContext(e.canvas,Ee.contextAttributes),0!=Ee.context?(Ee.setErrorCode(12288),xe.makeContextCurrent(Ee.context),e.useWebGL=!0,be.moduleContextCreatedCallbacks.forEach((function(e){e()})),xe.makeContextCurrent(null),62004):(Ee.setErrorCode(12297),0))},eglCreateWindowSurface:function(e,t,n,r){return 62e3!=e?(Ee.setErrorCode(12296),0):62002!=t?(Ee.setErrorCode(12293),0):(Ee.setErrorCode(12288),62006)},eglDestroyContext:function(e,t){return 62e3!=e?(Ee.setErrorCode(12296),0):62004!=t?(Ee.setErrorCode(12294),0):(xe.deleteContext(Ee.context),Ee.setErrorCode(12288),Ee.currentContext==t&&(Ee.currentContext=0),1)},eglDestroySurface:function(e,t){return 62e3!=e?(Ee.setErrorCode(12296),0):62006!=t?(Ee.setErrorCode(12301),1):(Ee.currentReadSurface==t&&(Ee.currentReadSurface=0),Ee.currentDrawSurface==t&&(Ee.currentDrawSurface=0),Ee.setErrorCode(12288),1)},eglGetConfigAttrib:function(e,t,n,r){if(62e3!=e)return Ee.setErrorCode(12296),0;if(62002!=t)return Ee.setErrorCode(12293),0;if(!r)return Ee.setErrorCode(12300),0;switch(Ee.setErrorCode(12288),n){case 12320:return D[r>>2]=Ee.contextAttributes.alpha?32:24,1;case 12321:return D[r>>2]=Ee.contextAttributes.alpha?8:0,1;case 12322:case 12323:case 12324:return D[r>>2]=8,1;case 12325:return D[r>>2]=Ee.contextAttributes.depth?24:0,1;case 12326:return D[r>>2]=Ee.contextAttributes.stencil?8:0,1;case 12327:return D[r>>2]=12344,1;case 12328:return D[r>>2]=62002,1;case 12329:return D[r>>2]=0,1;case 12330:return D[r>>2]=4096,1;case 12331:return D[r>>2]=16777216,1;case 12332:return D[r>>2]=4096,1;case 12333:case 12334:return D[r>>2]=0,1;case 12335:return D[r>>2]=12344,1;case 12337:return D[r>>2]=Ee.contextAttributes.antialias?4:0,1;case 12338:return D[r>>2]=Ee.contextAttributes.antialias?1:0,1;case 12339:return D[r>>2]=4,1;case 12340:return D[r>>2]=12344,1;case 12341:case 12342:case 12343:return D[r>>2]=-1,1;case 12345:case 12346:case 12347:return D[r>>2]=0,1;case 12348:return D[r>>2]=1,1;case 12349:case 12350:return D[r>>2]=0,1;case 12351:return D[r>>2]=12430,1;case 12352:return D[r>>2]=4,1;case 12354:return D[r>>2]=0,1;default:return Ee.setErrorCode(12292),0}},eglGetDisplay:function(e){return Ee.setErrorCode(12288),62e3},eglGetError:function(){return Ee.errorCode},eglGetProcAddress:function(e){return Ft(e)},eglInitialize:function(e,t,n){return 62e3==e?(t&&(D[t>>2]=1),n&&(D[n>>2]=4),Ee.defaultDisplayInitialized=!0,Ee.setErrorCode(12288),1):(Ee.setErrorCode(12296),0)},eglMakeCurrent:function(e,t,n,r){return 62e3!=e?(Ee.setErrorCode(12296),0):0!=r&&62004!=r?(Ee.setErrorCode(12294),0):0!=n&&62006!=n||0!=t&&62006!=t?(Ee.setErrorCode(12301),0):(xe.makeContextCurrent(r?Ee.context:null),Ee.currentContext=r,Ee.currentDrawSurface=t,Ee.currentReadSurface=n,Ee.setErrorCode(12288),1)},eglQueryString:function(e,t){if(62e3!=e)return Ee.setErrorCode(12296),0;if(Ee.setErrorCode(12288),Ee.stringCache[t])return Ee.stringCache[t];var n;switch(t){case 12371:n=O("Emscripten");break;case 12372:n=O("1.4 Emscripten EGL");break;case 12373:n=O("");break;case 12429:n=O("OpenGL_ES");break;default:return Ee.setErrorCode(12300),0}return Ee.stringCache[t]=n,n},eglSwapBuffers:function(){if(Ee.defaultDisplayInitialized)if(e.ctx){if(!e.ctx.isContextLost())return Ee.setErrorCode(12288),1;Ee.setErrorCode(12302)}else Ee.setErrorCode(12290);else Ee.setErrorCode(12289);return 0},eglSwapInterval:function(e,t){return 62e3!=e?(Ee.setErrorCode(12296),0):(0==t?_e(0,0):_e(1,t),Ee.setErrorCode(12288),1)},eglTerminate:function(e){return 62e3!=e?(Ee.setErrorCode(12296),0):(Ee.currentContext=0,Ee.currentReadSurface=0,Ee.currentDrawSurface=0,Ee.defaultDisplayInitialized=!1,Ee.setErrorCode(12288),1)},eglWaitGL:function(){return Ee.setErrorCode(12288),1},eglWaitNative:function(e){return Ee.setErrorCode(12288),1},emscripten_asm_const_int:function(e,t,n){var r=function(e,t){var n;for(mt.length=0,t>>=2;n=C[e++];){var r=n<105;r&&1&t&&t++,mt.push(r?F[t++>>1]:D[t]),++t}return mt}(t,n);return ee[e].apply(null,r)},emscripten_exit_fullscreen:function(){if(!Ce.fullscreenEnabled())return-1;Ce.removeDeferredCalls(Te);var e=Se[1];if(e.exitFullscreen)e.fullscreenElement&&e.exitFullscreen();else{if(!e.webkitExitFullscreen)return-1;e.webkitFullscreenElement&&e.webkitExitFullscreen()}return 0},emscripten_exit_pointerlock:function(){if(Ce.removeDeferredCalls(ze),document.exitPointerLock)document.exitPointerLock();else{if(!document.msExitPointerLock)return-1;document.msExitPointerLock()}return 0},emscripten_get_device_pixel_ratio:function(){return devicePixelRatio},emscripten_get_element_css_size:function(e,t,n){if(!(e=De(e)))return-4;var r=Pe(e);return F[t>>3]=r.width,F[n>>3]=r.height,0},emscripten_get_gamepad_status:function(e,t){return e<0||e>=Ce.lastGamepadState.length?-5:Ce.lastGamepadState[e]?(Oe(t,Ce.lastGamepadState[e]),0):-7},emscripten_get_num_gamepads:function(){return Ce.lastGamepadState.length},emscripten_glActiveTexture:function(e){gt.activeTexture(e)},emscripten_glAttachShader:function(e,t){gt.attachShader(xe.programs[e],xe.shaders[t])},emscripten_glBeginQueryEXT:function(e,t){gt.disjointTimerQueryExt.beginQueryEXT(e,xe.timerQueriesEXT[t])},emscripten_glBindAttribLocation:function(e,t,n){gt.bindAttribLocation(xe.programs[e],t,P(n))},emscripten_glBindBuffer:function(e,t){34962==e?gt.currentArrayBufferBinding=t:34963==e&&(gt.currentElementArrayBufferBinding=t),gt.bindBuffer(e,xe.buffers[t])},emscripten_glBindFramebuffer:function(e,t){gt.bindFramebuffer(e,xe.framebuffers[t])},emscripten_glBindRenderbuffer:function(e,t){gt.bindRenderbuffer(e,xe.renderbuffers[t])},emscripten_glBindTexture:function(e,t){gt.bindTexture(e,xe.textures[t])},emscripten_glBindVertexArrayOES:function(e){gt.bindVertexArray(xe.vaos[e]);var t=gt.getParameter(34965);gt.currentElementArrayBufferBinding=t?0|t.name:0},emscripten_glBlendColor:function(e,t,n,r){gt.blendColor(e,t,n,r)},emscripten_glBlendEquation:function(e){gt.blendEquation(e)},emscripten_glBlendEquationSeparate:function(e,t){gt.blendEquationSeparate(e,t)},emscripten_glBlendFunc:function(e,t){gt.blendFunc(e,t)},emscripten_glBlendFuncSeparate:function(e,t,n,r){gt.blendFuncSeparate(e,t,n,r)},emscripten_glBufferData:function(e,t,n,r){gt.bufferData(e,n?C.subarray(n,n+t):t,r)},emscripten_glBufferSubData:function(e,t,n,r){gt.bufferSubData(e,t,C.subarray(r,r+n))},emscripten_glCheckFramebufferStatus:function(e){return gt.checkFramebufferStatus(e)},emscripten_glClear:function(e){gt.clear(e)},emscripten_glClearColor:function(e,t,n,r){gt.clearColor(e,t,n,r)},emscripten_glClearDepthf:function(e){gt.clearDepth(e)},emscripten_glClearStencil:function(e){gt.clearStencil(e)},emscripten_glColorMask:function(e,t,n,r){gt.colorMask(!!e,!!t,!!n,!!r)},emscripten_glCompileShader:function(e){gt.compileShader(xe.shaders[e])},emscripten_glCompressedTexImage2D:function(e,t,n,r,o,i,a,s){gt.compressedTexImage2D(e,t,n,r,o,i,s?C.subarray(s,s+a):null)},emscripten_glCompressedTexSubImage2D:function(e,t,n,r,o,i,a,s,u){gt.compressedTexSubImage2D(e,t,n,r,o,i,a,u?C.subarray(u,u+s):null)},emscripten_glCopyTexImage2D:function(e,t,n,r,o,i,a,s){gt.copyTexImage2D(e,t,n,r,o,i,a,s)},emscripten_glCopyTexSubImage2D:function(e,t,n,r,o,i,a,s){gt.copyTexSubImage2D(e,t,n,r,o,i,a,s)},emscripten_glCreateProgram:function(){var e=xe.getNewId(xe.programs),t=gt.createProgram();return t.name=e,xe.programs[e]=t,e},emscripten_glCreateShader:function(e){var t=xe.getNewId(xe.shaders);return xe.shaders[t]=gt.createShader(e),t},emscripten_glCullFace:function(e){gt.cullFace(e)},emscripten_glDeleteBuffers:function(e,t){for(var n=0;n<e;n++){var r=D[t+4*n>>2],o=xe.buffers[r];o&&(gt.deleteBuffer(o),o.name=0,xe.buffers[r]=null,r==gt.currentArrayBufferBinding&&(gt.currentArrayBufferBinding=0),r==gt.currentElementArrayBufferBinding&&(gt.currentElementArrayBufferBinding=0))}},emscripten_glDeleteFramebuffers:function(e,t){for(var n=0;n<e;++n){var r=D[t+4*n>>2],o=xe.framebuffers[r];o&&(gt.deleteFramebuffer(o),o.name=0,xe.framebuffers[r]=null)}},emscripten_glDeleteProgram:function(e){if(e){var t=xe.programs[e];t?(gt.deleteProgram(t),t.name=0,xe.programs[e]=null,xe.programInfos[e]=null):xe.recordError(1281)}},emscripten_glDeleteQueriesEXT:function(e,t){for(var n=0;n<e;n++){var r=D[t+4*n>>2],o=xe.timerQueriesEXT[r];o&&(gt.disjointTimerQueryExt.deleteQueryEXT(o),xe.timerQueriesEXT[r]=null)}},emscripten_glDeleteRenderbuffers:function(e,t){for(var n=0;n<e;n++){var r=D[t+4*n>>2],o=xe.renderbuffers[r];o&&(gt.deleteRenderbuffer(o),o.name=0,xe.renderbuffers[r]=null)}},emscripten_glDeleteShader:function(e){if(e){var t=xe.shaders[e];t?(gt.deleteShader(t),xe.shaders[e]=null):xe.recordError(1281)}},emscripten_glDeleteTextures:function(e,t){for(var n=0;n<e;n++){var r=D[t+4*n>>2],o=xe.textures[r];o&&(gt.deleteTexture(o),o.name=0,xe.textures[r]=null)}},emscripten_glDeleteVertexArraysOES:function(e,t){for(var n=0;n<e;n++){var r=D[t+4*n>>2];gt.deleteVertexArray(xe.vaos[r]),xe.vaos[r]=null}},emscripten_glDepthFunc:function(e){gt.depthFunc(e)},emscripten_glDepthMask:function(e){gt.depthMask(!!e)},emscripten_glDepthRangef:function(e,t){gt.depthRange(e,t)},emscripten_glDetachShader:function(e,t){gt.detachShader(xe.programs[e],xe.shaders[t])},emscripten_glDisable:function(e){gt.disable(e)},emscripten_glDisableVertexAttribArray:function(e){xe.currentContext.clientBuffers[e].enabled=!1,gt.disableVertexAttribArray(e)},emscripten_glDrawArrays:function(e,t,n){xe.preDrawHandleClientVertexAttribBindings(t+n),gt.drawArrays(e,t,n),xe.postDrawHandleClientVertexAttribBindings()},emscripten_glDrawArraysInstancedANGLE:function(e,t,n,r){gt.drawArraysInstanced(e,t,n,r)},emscripten_glDrawBuffersWEBGL:function(e,t){for(var n=Ie[e],r=0;r<e;r++)n[r]=D[t+4*r>>2];gt.drawBuffers(n)},emscripten_glDrawElements:function(e,t,n,r){var o;if(!gt.currentElementArrayBufferBinding){var i=xe.calcBufLength(1,n,0,t);o=xe.getTempIndexBuffer(i),gt.bindBuffer(34963,o),gt.bufferSubData(34963,0,C.subarray(r,r+i)),r=0}xe.preDrawHandleClientVertexAttribBindings(t),gt.drawElements(e,t,n,r),xe.postDrawHandleClientVertexAttribBindings(t),gt.currentElementArrayBufferBinding||gt.bindBuffer(34963,null)},emscripten_glDrawElementsInstancedANGLE:function(e,t,n,r,o){gt.drawElementsInstanced(e,t,n,r,o)},emscripten_glEnable:function(e){gt.enable(e)},emscripten_glEnableVertexAttribArray:function(e){xe.currentContext.clientBuffers[e].enabled=!0,gt.enableVertexAttribArray(e)},emscripten_glEndQueryEXT:function(e){gt.disjointTimerQueryExt.endQueryEXT(e)},emscripten_glFinish:function(){gt.finish()},emscripten_glFlush:function(){gt.flush()},emscripten_glFramebufferRenderbuffer:function(e,t,n,r){gt.framebufferRenderbuffer(e,t,n,xe.renderbuffers[r])},emscripten_glFramebufferTexture2D:function(e,t,n,r,o){gt.framebufferTexture2D(e,t,n,xe.textures[r],o)},emscripten_glFrontFace:function(e){gt.frontFace(e)},emscripten_glGenBuffers:function(e,t){Ne(e,t,"createBuffer",xe.buffers)},emscripten_glGenFramebuffers:function(e,t){Ne(e,t,"createFramebuffer",xe.framebuffers)},emscripten_glGenQueriesEXT:function(e,t){for(var n=0;n<e;n++){var r=gt.disjointTimerQueryExt.createQueryEXT();if(!r){for(xe.recordError(1282);n<e;)D[t+4*n++>>2]=0;return}var o=xe.getNewId(xe.timerQueriesEXT);r.name=o,xe.timerQueriesEXT[o]=r,D[t+4*n>>2]=o}},emscripten_glGenRenderbuffers:function(e,t){Ne(e,t,"createRenderbuffer",xe.renderbuffers)},emscripten_glGenTextures:function(e,t){Ne(e,t,"createTexture",xe.textures)},emscripten_glGenVertexArraysOES:function(e,t){Ne(e,t,"createVertexArray",xe.vaos)},emscripten_glGenerateMipmap:function(e){gt.generateMipmap(e)},emscripten_glGetActiveAttrib:function(e,t,n,r,o,i,a){Ge("getActiveAttrib",e,t,n,r,o,i,a)},emscripten_glGetActiveUniform:function(e,t,n,r,o,i,a){Ge("getActiveUniform",e,t,n,r,o,i,a)},emscripten_glGetAttachedShaders:function(e,t,n,r){var o=gt.getAttachedShaders(xe.programs[e]),i=o.length;i>t&&(i=t),D[n>>2]=i;for(var a=0;a<i;++a){var s=xe.shaders.indexOf(o[a]);D[r+4*a>>2]=s}},emscripten_glGetAttribLocation:function(e,t){return gt.getAttribLocation(xe.programs[e],P(t))},emscripten_glGetBooleanv:function(e,t){je(e,t,4)},emscripten_glGetBufferParameteriv:function(e,t,n){n?D[n>>2]=gt.getBufferParameter(e,t):xe.recordError(1281)},emscripten_glGetError:function(){var e=gt.getError()||xe.lastError;return xe.lastError=0,e},emscripten_glGetFloatv:function(e,t){je(e,t,2)},emscripten_glGetFramebufferAttachmentParameteriv:function(e,t,n,r){var o=gt.getFramebufferAttachmentParameter(e,t,n);(o instanceof WebGLRenderbuffer||o instanceof WebGLTexture)&&(o=0|o.name),D[r>>2]=o},emscripten_glGetIntegerv:function(e,t){je(e,t,0)},emscripten_glGetProgramInfoLog:function(e,t,n,r){var o=gt.getProgramInfoLog(xe.programs[e]);null===o&&(o="(unknown error)");var i=t>0&&r?T(o,r,t):0;n&&(D[n>>2]=i)},emscripten_glGetProgramiv:function(e,t,n){if(n)if(e>=xe.counter)xe.recordError(1281);else{var r=xe.programInfos[e];if(r)if(35716==t){var o=gt.getProgramInfoLog(xe.programs[e]);null===o&&(o="(unknown error)"),D[n>>2]=o.length+1}else if(35719==t)D[n>>2]=r.maxUniformLength;else if(35722==t){if(-1==r.maxAttributeLength){e=xe.programs[e];var i=gt.getProgramParameter(e,35721);r.maxAttributeLength=0;for(var a=0;a<i;++a){var s=gt.getActiveAttrib(e,a);r.maxAttributeLength=Math.max(r.maxAttributeLength,s.name.length+1)}}D[n>>2]=r.maxAttributeLength}else if(35381==t){if(-1==r.maxUniformBlockNameLength){e=xe.programs[e];var u=gt.getProgramParameter(e,35382);for(r.maxUniformBlockNameLength=0,a=0;a<u;++a){var c=gt.getActiveUniformBlockName(e,a);r.maxUniformBlockNameLength=Math.max(r.maxUniformBlockNameLength,c.length+1)}}D[n>>2]=r.maxUniformBlockNameLength}else D[n>>2]=gt.getProgramParameter(xe.programs[e],t);else xe.recordError(1282)}else xe.recordError(1281)},emscripten_glGetQueryObjecti64vEXT:function(e,t,n){if(n){var r=xe.timerQueriesEXT[e],o=gt.disjointTimerQueryExt.getQueryObjectEXT(r,t);Ue(n,"boolean"==typeof o?o?1:0:o)}else xe.recordError(1281)},emscripten_glGetQueryObjectivEXT:function(e,t,n){if(n){var r,o=xe.timerQueriesEXT[e],i=gt.disjointTimerQueryExt.getQueryObjectEXT(o,t);r="boolean"==typeof i?i?1:0:i,D[n>>2]=r}else xe.recordError(1281)},emscripten_glGetQueryObjectui64vEXT:function(e,t,n){if(n){var r=xe.timerQueriesEXT[e],o=gt.disjointTimerQueryExt.getQueryObjectEXT(r,t);Ue(n,"boolean"==typeof o?o?1:0:o)}else xe.recordError(1281)},emscripten_glGetQueryObjectuivEXT:function(e,t,n){if(n){var r,o=xe.timerQueriesEXT[e],i=gt.disjointTimerQueryExt.getQueryObjectEXT(o,t);r="boolean"==typeof i?i?1:0:i,D[n>>2]=r}else xe.recordError(1281)},emscripten_glGetQueryivEXT:function(e,t,n){n?D[n>>2]=gt.disjointTimerQueryExt.getQueryEXT(e,t):xe.recordError(1281)},emscripten_glGetRenderbufferParameteriv:function(e,t,n){n?D[n>>2]=gt.getRenderbufferParameter(e,t):xe.recordError(1281)},emscripten_glGetShaderInfoLog:function(e,t,n,r){var o=gt.getShaderInfoLog(xe.shaders[e]);null===o&&(o="(unknown error)");var i=t>0&&r?T(o,r,t):0;n&&(D[n>>2]=i)},emscripten_glGetShaderPrecisionFormat:function(e,t,n,r){var o=gt.getShaderPrecisionFormat(e,t);D[n>>2]=o.rangeMin,D[n+4>>2]=o.rangeMax,D[r>>2]=o.precision},emscripten_glGetShaderSource:function(e,t,n,r){var o=gt.getShaderSource(xe.shaders[e]);if(o){var i=t>0&&r?T(o,r,t):0;n&&(D[n>>2]=i)}},emscripten_glGetShaderiv:function(e,t,n){if(n)if(35716==t){var r=gt.getShaderInfoLog(xe.shaders[e]);null===r&&(r="(unknown error)");var o=r?r.length+1:0;D[n>>2]=o}else if(35720==t){var i=gt.getShaderSource(xe.shaders[e]),a=i?i.length+1:0;D[n>>2]=a}else D[n>>2]=gt.getShaderParameter(xe.shaders[e],t);else xe.recordError(1281)},emscripten_glGetString:function(e){if(xe.stringCache[e])return xe.stringCache[e];var t;switch(e){case 7939:var n=gt.getSupportedExtensions()||[];t=Ve((n=n.concat(n.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var r=gt.getParameter(e);r||xe.recordError(1280),t=Ve(r);break;case 7938:var o=gt.getParameter(7938);t=Ve(o="OpenGL ES 2.0 ("+o+")");break;case 35724:var i=gt.getParameter(35724),a=i.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==a&&(3==a[1].length&&(a[1]=a[1]+"0"),i="OpenGL ES GLSL ES "+a[1]+" ("+i+")"),t=Ve(i);break;default:return xe.recordError(1280),0}return xe.stringCache[e]=t,t},emscripten_glGetTexParameterfv:function(e,t,n){n?L[n>>2]=gt.getTexParameter(e,t):xe.recordError(1281)},emscripten_glGetTexParameteriv:function(e,t,n){n?D[n>>2]=gt.getTexParameter(e,t):xe.recordError(1281)},emscripten_glGetUniformLocation:function(e,t){var n=0;if("]"==(t=P(t))[t.length-1]){var r=t.lastIndexOf("[");n="]"!=t[r+1]?He(t.slice(r+1)):0,t=t.slice(0,r)}var o=xe.programInfos[e]&&xe.programInfos[e].uniforms[t];return o&&n>=0&&n<o[0]?o[1]+n:-1},emscripten_glGetUniformfv:function(e,t,n){qe(e,t,n,2)},emscripten_glGetUniformiv:function(e,t,n){qe(e,t,n,0)},emscripten_glGetVertexAttribPointerv:function(e,t,n){n?(xe.currentContext.clientBuffers[e].enabled&&v("glGetVertexAttribPointer on client-side array: not supported, bad data returned"),D[n>>2]=gt.getVertexAttribOffset(e,t)):xe.recordError(1281)},emscripten_glGetVertexAttribfv:function(e,t,n){Xe(e,t,n,2)},emscripten_glGetVertexAttribiv:function(e,t,n){Xe(e,t,n,5)},emscripten_glHint:function(e,t){gt.hint(e,t)},emscripten_glIsBuffer:function(e){var t=xe.buffers[e];return t?gt.isBuffer(t):0},emscripten_glIsEnabled:function(e){return gt.isEnabled(e)},emscripten_glIsFramebuffer:function(e){var t=xe.framebuffers[e];return t?gt.isFramebuffer(t):0},emscripten_glIsProgram:function(e){return(e=xe.programs[e])?gt.isProgram(e):0},emscripten_glIsQueryEXT:function(e){var t=xe.timerQueriesEXT[e];return t?gt.disjointTimerQueryExt.isQueryEXT(t):0},emscripten_glIsRenderbuffer:function(e){var t=xe.renderbuffers[e];return t?gt.isRenderbuffer(t):0},emscripten_glIsShader:function(e){var t=xe.shaders[e];return t?gt.isShader(t):0},emscripten_glIsTexture:function(e){var t=xe.textures[e];return t?gt.isTexture(t):0},emscripten_glIsVertexArrayOES:function(e){var t=xe.vaos[e];return t?gt.isVertexArray(t):0},emscripten_glLineWidth:function(e){gt.lineWidth(e)},emscripten_glLinkProgram:function(e){gt.linkProgram(xe.programs[e]),xe.populateUniformTable(e)},emscripten_glPixelStorei:function(e,t){3317==e&&(xe.unpackAlignment=t),gt.pixelStorei(e,t)},emscripten_glPolygonOffset:function(e,t){gt.polygonOffset(e,t)},emscripten_glQueryCounterEXT:function(e,t){gt.disjointTimerQueryExt.queryCounterEXT(xe.timerQueriesEXT[e],t)},emscripten_glReadPixels:function(e,t,n,r,o,i,a){var s=$e(i,o,n,r,a);s?gt.readPixels(e,t,n,r,o,i,s):xe.recordError(1280)},emscripten_glReleaseShaderCompiler:function(){},emscripten_glRenderbufferStorage:function(e,t,n,r){gt.renderbufferStorage(e,t,n,r)},emscripten_glSampleCoverage:function(e,t){gt.sampleCoverage(e,!!t)},emscripten_glScissor:function(e,t,n,r){gt.scissor(e,t,n,r)},emscripten_glShaderBinary:function(){xe.recordError(1280)},emscripten_glShaderSource:function(e,t,n,r){var o=xe.getSource(e,t,n,r);gt.shaderSource(xe.shaders[e],o)},emscripten_glStencilFunc:function(e,t,n){gt.stencilFunc(e,t,n)},emscripten_glStencilFuncSeparate:function(e,t,n,r){gt.stencilFuncSeparate(e,t,n,r)},emscripten_glStencilMask:function(e){gt.stencilMask(e)},emscripten_glStencilMaskSeparate:function(e,t){gt.stencilMaskSeparate(e,t)},emscripten_glStencilOp:function(e,t,n){gt.stencilOp(e,t,n)},emscripten_glStencilOpSeparate:function(e,t,n,r){gt.stencilOpSeparate(e,t,n,r)},emscripten_glTexImage2D:function(e,t,n,r,o,i,a,s,u){gt.texImage2D(e,t,n,r,o,i,a,s,u?$e(s,a,r,o,u):null)},emscripten_glTexParameterf:function(e,t,n){gt.texParameterf(e,t,n)},emscripten_glTexParameterfv:function(e,t,n){var r=L[n>>2];gt.texParameterf(e,t,r)},emscripten_glTexParameteri:function(e,t,n){gt.texParameteri(e,t,n)},emscripten_glTexParameteriv:function(e,t,n){var r=D[n>>2];gt.texParameteri(e,t,r)},emscripten_glTexSubImage2D:function(e,t,n,r,o,i,a,s,u){var c=null;u&&(c=$e(s,a,o,i,u)),gt.texSubImage2D(e,t,n,r,o,i,a,s,c)},emscripten_glUniform1f:function(e,t){gt.uniform1f(xe.uniforms[e],t)},emscripten_glUniform1fv:function(e,t,n){if(t<=288)for(var r=We[t-1],o=0;o<t;++o)r[o]=L[n+4*o>>2];else r=L.subarray(n>>2,n+4*t>>2);gt.uniform1fv(xe.uniforms[e],r)},emscripten_glUniform1i:function(e,t){gt.uniform1i(xe.uniforms[e],t)},emscripten_glUniform1iv:function(e,t,n){if(t<=288)for(var r=Ye[t-1],o=0;o<t;++o)r[o]=D[n+4*o>>2];else r=D.subarray(n>>2,n+4*t>>2);gt.uniform1iv(xe.uniforms[e],r)},emscripten_glUniform2f:function(e,t,n){gt.uniform2f(xe.uniforms[e],t,n)},emscripten_glUniform2fv:function(e,t,n){if(t<=144)for(var r=We[2*t-1],o=0;o<2*t;o+=2)r[o]=L[n+4*o>>2],r[o+1]=L[n+(4*o+4)>>2];else r=L.subarray(n>>2,n+8*t>>2);gt.uniform2fv(xe.uniforms[e],r)},emscripten_glUniform2i:function(e,t,n){gt.uniform2i(xe.uniforms[e],t,n)},emscripten_glUniform2iv:function(e,t,n){if(t<=144)for(var r=Ye[2*t-1],o=0;o<2*t;o+=2)r[o]=D[n+4*o>>2],r[o+1]=D[n+(4*o+4)>>2];else r=D.subarray(n>>2,n+8*t>>2);gt.uniform2iv(xe.uniforms[e],r)},emscripten_glUniform3f:function(e,t,n,r){gt.uniform3f(xe.uniforms[e],t,n,r)},emscripten_glUniform3fv:function(e,t,n){if(t<=96)for(var r=We[3*t-1],o=0;o<3*t;o+=3)r[o]=L[n+4*o>>2],r[o+1]=L[n+(4*o+4)>>2],r[o+2]=L[n+(4*o+8)>>2];else r=L.subarray(n>>2,n+12*t>>2);gt.uniform3fv(xe.uniforms[e],r)},emscripten_glUniform3i:function(e,t,n,r){gt.uniform3i(xe.uniforms[e],t,n,r)},emscripten_glUniform3iv:function(e,t,n){if(t<=96)for(var r=Ye[3*t-1],o=0;o<3*t;o+=3)r[o]=D[n+4*o>>2],r[o+1]=D[n+(4*o+4)>>2],r[o+2]=D[n+(4*o+8)>>2];else r=D.subarray(n>>2,n+12*t>>2);gt.uniform3iv(xe.uniforms[e],r)},emscripten_glUniform4f:function(e,t,n,r,o){gt.uniform4f(xe.uniforms[e],t,n,r,o)},emscripten_glUniform4fv:function(e,t,n){if(t<=72){var r=We[4*t-1],o=L;n>>=2;for(var i=0;i<4*t;i+=4){var a=n+i;r[i]=o[a],r[i+1]=o[a+1],r[i+2]=o[a+2],r[i+3]=o[a+3]}}else r=L.subarray(n>>2,n+16*t>>2);gt.uniform4fv(xe.uniforms[e],r)},emscripten_glUniform4i:function(e,t,n,r,o){gt.uniform4i(xe.uniforms[e],t,n,r,o)},emscripten_glUniform4iv:function(e,t,n){if(t<=72)for(var r=Ye[4*t-1],o=0;o<4*t;o+=4)r[o]=D[n+4*o>>2],r[o+1]=D[n+(4*o+4)>>2],r[o+2]=D[n+(4*o+8)>>2],r[o+3]=D[n+(4*o+12)>>2];else r=D.subarray(n>>2,n+16*t>>2);gt.uniform4iv(xe.uniforms[e],r)},emscripten_glUniformMatrix2fv:function(e,t,n,r){if(t<=72)for(var o=We[4*t-1],i=0;i<4*t;i+=4)o[i]=L[r+4*i>>2],o[i+1]=L[r+(4*i+4)>>2],o[i+2]=L[r+(4*i+8)>>2],o[i+3]=L[r+(4*i+12)>>2];else o=L.subarray(r>>2,r+16*t>>2);gt.uniformMatrix2fv(xe.uniforms[e],!!n,o)},emscripten_glUniformMatrix3fv:function(e,t,n,r){if(t<=32)for(var o=We[9*t-1],i=0;i<9*t;i+=9)o[i]=L[r+4*i>>2],o[i+1]=L[r+(4*i+4)>>2],o[i+2]=L[r+(4*i+8)>>2],o[i+3]=L[r+(4*i+12)>>2],o[i+4]=L[r+(4*i+16)>>2],o[i+5]=L[r+(4*i+20)>>2],o[i+6]=L[r+(4*i+24)>>2],o[i+7]=L[r+(4*i+28)>>2],o[i+8]=L[r+(4*i+32)>>2];else o=L.subarray(r>>2,r+36*t>>2);gt.uniformMatrix3fv(xe.uniforms[e],!!n,o)},emscripten_glUniformMatrix4fv:function(e,t,n,r){if(t<=18){var o=We[16*t-1],i=L;r>>=2;for(var a=0;a<16*t;a+=16){var s=r+a;o[a]=i[s],o[a+1]=i[s+1],o[a+2]=i[s+2],o[a+3]=i[s+3],o[a+4]=i[s+4],o[a+5]=i[s+5],o[a+6]=i[s+6],o[a+7]=i[s+7],o[a+8]=i[s+8],o[a+9]=i[s+9],o[a+10]=i[s+10],o[a+11]=i[s+11],o[a+12]=i[s+12],o[a+13]=i[s+13],o[a+14]=i[s+14],o[a+15]=i[s+15]}}else o=L.subarray(r>>2,r+64*t>>2);gt.uniformMatrix4fv(xe.uniforms[e],!!n,o)},emscripten_glUseProgram:function(e){gt.useProgram(xe.programs[e])},emscripten_glValidateProgram:function(e){gt.validateProgram(xe.programs[e])},emscripten_glVertexAttrib1f:function(e,t){gt.vertexAttrib1f(e,t)},emscripten_glVertexAttrib1fv:function(e,t){gt.vertexAttrib1f(e,L[t>>2])},emscripten_glVertexAttrib2f:function(e,t,n){gt.vertexAttrib2f(e,t,n)},emscripten_glVertexAttrib2fv:function(e,t){gt.vertexAttrib2f(e,L[t>>2],L[t+4>>2])},emscripten_glVertexAttrib3f:function(e,t,n,r){gt.vertexAttrib3f(e,t,n,r)},emscripten_glVertexAttrib3fv:function(e,t){gt.vertexAttrib3f(e,L[t>>2],L[t+4>>2],L[t+8>>2])},emscripten_glVertexAttrib4f:function(e,t,n,r,o){gt.vertexAttrib4f(e,t,n,r,o)},emscripten_glVertexAttrib4fv:function(e,t){gt.vertexAttrib4f(e,L[t>>2],L[t+4>>2],L[t+8>>2],L[t+12>>2])},emscripten_glVertexAttribDivisorANGLE:function(e,t){gt.vertexAttribDivisor(e,t)},emscripten_glVertexAttribPointer:function(e,t,n,r,o,i){var a=xe.currentContext.clientBuffers[e];if(!gt.currentArrayBufferBinding)return a.size=t,a.type=n,a.normalized=r,a.stride=o,a.ptr=i,a.clientside=!0,void(a.vertexAttribPointerAdaptor=function(e,t,n,r,o,i){this.vertexAttribPointer(e,t,n,r,o,i)});a.clientside=!1,gt.vertexAttribPointer(e,t,n,!!r,o,i)},emscripten_glViewport:function(e,t,n,r){gt.viewport(e,t,n,r)},emscripten_has_asyncify:function(){return 1},emscripten_memcpy_big:function(e,t,n){C.copyWithin(e,t,t+n)},emscripten_request_fullscreen_strategy:function(e,t,n){return function(e,t){return Ce.fullscreenEnabled()?(e=De(e))?e.requestFullscreen||e.webkitRequestFullscreen?Ce.canPerformEventHandlerRequests()?Te(e,t):t.deferUntilInEventHandler?(Ce.deferCall(Te,1,[e,t]),1):-2:-3:-4:-1}(e,{scaleMode:D[n>>2],canvasResolutionScaleMode:D[n+4>>2],filteringMode:D[n+8>>2],deferUntilInEventHandler:t,canvasResizedCallback:D[n+12>>2],canvasResizedCallbackUserData:D[n+16>>2]})},emscripten_request_pointerlock:function(e,t){return(e=De(e))?e.requestPointerLock||e.msRequestPointerLock?Ce.canPerformEventHandlerRequests()?ze(e):t?(Ce.deferCall(ze,2,[e]),1):-2:-1:-4},emscripten_resize_heap:function(e){$("OOM")},emscripten_sample_gamepad_data:function(){return(Ce.lastGamepadState=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null)?0:-1},emscripten_set_beforeunload_callback_on_thread:function(e,t,n){return"undefined"==typeof onbeforeunload?-1:1!==n?-5:(function(e,t,n,r,o,i){var a={target:De(e),eventTypeString:i,callbackfunc:r,handlerFunc:function(e){var n,i,a=e||event,s=(n=o,i=t,void Tt.apply(null,[r,n,0,i]));if(s&&(s=P(s)),s)return a.preventDefault(),a.returnValue=s,s},useCapture:n};Ce.registerOrRemoveHandler(a)}(2,e,!0,t,28,"beforeunload"),0)},emscripten_set_blur_callback_on_thread:function(e,t,n,r,o){return Qe(e,t,n,r,12,"blur"),0},emscripten_set_canvas_element_size:Fe,emscripten_set_element_css_size:function(e,t,n){return(e=De(e))?(e.style.width=t+"px",e.style.height=n+"px",0):-4},emscripten_set_focus_callback_on_thread:function(e,t,n,r,o){return Qe(e,t,n,r,13,"focus"),0},emscripten_set_fullscreenchange_callback_on_thread:function(e,t,n,r,o){return Ce.fullscreenEnabled()?(e=De(e))?(Ke(e,t,n,r,19,"fullscreenchange"),Ke(e,t,n,r,19,"webkitfullscreenchange"),0):-4:-1},emscripten_set_gamepadconnected_callback_on_thread:function(e,t,n,r){return navigator.getGamepads||navigator.webkitGetGamepads?(Je(2,e,t,n,26,"gamepadconnected"),0):-1},emscripten_set_gamepaddisconnected_callback_on_thread:function(e,t,n,r){return navigator.getGamepads||navigator.webkitGetGamepads?(Je(2,e,t,n,27,"gamepaddisconnected"),0):-1},emscripten_set_keydown_callback_on_thread:function(e,t,n,r,o){return Ze(e,t,n,r,2,"keydown"),0},emscripten_set_keypress_callback_on_thread:function(e,t,n,r,o){return Ze(e,t,n,r,1,"keypress"),0},emscripten_set_keyup_callback_on_thread:function(e,t,n,r,o){return Ze(e,t,n,r,3,"keyup"),0},emscripten_set_main_loop_arg:function(e,t,n,r){we((function(){var n;n=t,Rt.apply(null,[e,n])}),n,r,t)},emscripten_set_mousedown_callback_on_thread:function(e,t,n,r,o){return tt(e,t,n,r,5,"mousedown"),0},emscripten_set_mouseenter_callback_on_thread:function(e,t,n,r,o){return tt(e,t,n,r,33,"mouseenter"),0},emscripten_set_mouseleave_callback_on_thread:function(e,t,n,r,o){return tt(e,t,n,r,34,"mouseleave"),0},emscripten_set_mousemove_callback_on_thread:function(e,t,n,r,o){return tt(e,t,n,r,8,"mousemove"),0},emscripten_set_mouseup_callback_on_thread:function(e,t,n,r,o){return tt(e,t,n,r,6,"mouseup"),0},emscripten_set_pointerlockchange_callback_on_thread:function(e,t,n,r,o){return document&&document.body&&(document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock)?(e=De(e))?(nt(e,t,n,r,20,"pointerlockchange"),nt(e,t,n,r,20,"mozpointerlockchange"),nt(e,t,n,r,20,"webkitpointerlockchange"),nt(e,t,n,r,20,"mspointerlockchange"),0):-4:-1},emscripten_set_resize_callback_on_thread:function(e,t,n,r,o){return function(e,t,n,r,o,i,a){Ce.uiEvent||(Ce.uiEvent=At(36));var s={target:e=De(e),eventTypeString:i,callbackfunc:r,handlerFunc:function(n){var i=n||event;if(i.target==e){var a=document.body;if(a){var s,u,c,l=Ce.uiEvent;D[l>>2]=i.detail,D[l+4>>2]=a.clientWidth,D[l+8>>2]=a.clientHeight,D[l+12>>2]=innerWidth,D[l+16>>2]=innerHeight,D[l+20>>2]=outerWidth,D[l+24>>2]=outerHeight,D[l+28>>2]=pageXOffset,D[l+32>>2]=pageYOffset,s=o,u=l,c=t,void Tt.apply(null,[r,s,u,c])&&i.preventDefault()}}},useCapture:n};Ce.registerOrRemoveHandler(s)}(e,t,n,r,10,"resize"),0},emscripten_set_touchcancel_callback_on_thread:function(e,t,n,r,o){return rt(e,t,n,r,25,"touchcancel"),0},emscripten_set_touchend_callback_on_thread:function(e,t,n,r,o){return rt(e,t,n,r,23,"touchend"),0},emscripten_set_touchmove_callback_on_thread:function(e,t,n,r,o){return rt(e,t,n,r,24,"touchmove"),0},emscripten_set_touchstart_callback_on_thread:function(e,t,n,r,o){return rt(e,t,n,r,22,"touchstart"),0},emscripten_set_visibilitychange_callback_on_thread:function(e,t,n,r){return ot(Se[1],e,t,n,21,"visibilitychange"),0},emscripten_set_wheel_callback_on_thread:function(e,t,n,r,o){return void 0!==(e=De(e)).onwheel?(function(e,t,n,r,o,i,a){Ce.wheelEvent||(Ce.wheelEvent=At(96));var s={target:e,allowsDeferredCalls:!0,eventTypeString:i,callbackfunc:r,handlerFunc:function(n){var i,a,s,u=n||event,c=Ce.wheelEvent;et(c,u,e),F[c+64>>3]=u.deltaX,F[c+72>>3]=u.deltaY,F[c+80>>3]=u.deltaZ,D[c+88>>2]=u.deltaMode,i=o,a=c,s=t,void Tt.apply(null,[r,i,a,s])&&u.preventDefault()},useCapture:n};Ce.registerOrRemoveHandler(s)}(e,t,n,r,9,"wheel"),0):-1},emscripten_sleep:function(e){ht.handleSleep((function(t){be.safeSetTimeout(t,e)}))},emscripten_thread_sleep:function(e){for(var t=ge();ge()-t<e;);},environ_get:function(e,t){try{var n=0;return at().forEach((function(r,o){var i=t+n;D[e+4*o>>2]=i,function(e,t,n){for(var r=0;r<e.length;++r)x[t++>>0]=e.charCodeAt(r);n||(x[t>>0]=0)}(r,i),n+=r.length+1})),0}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},environ_sizes_get:function(e,t){try{var n=at();D[e>>2]=n.length;var r=0;return n.forEach((function(e){r+=e.length+1})),D[t>>2]=r,0}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},fd_close:function(e){try{var t=ye.getStreamFromFD(e);return ve.close(t),0}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},fd_read:function(e,t,n,r){try{var o=ye.getStreamFromFD(e),i=ye.doReadv(o,t,n);return D[r>>2]=i,0}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},fd_seek:function(e,t,n,r,o){try{var i=ye.getStreamFromFD(e),a=4294967296*n+(t>>>0),s=9007199254740992;return a<=-s||a>=s?-61:(ve.llseek(i,a,r),K=[i.position>>>0,(Q=i.position,+Math.abs(Q)>=1?Q>0?(0|Math.min(+Math.floor(Q/4294967296),4294967295))>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],D[o>>2]=K[0],D[o+4>>2]=K[1],i.getdents&&0===a&&0===r&&(i.getdents=null),0)}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},fd_write:function(e,t,n,r){try{var o=ye.getStreamFromFD(e),i=ye.doWritev(o,t,n);return D[r>>2]=i,0}catch(e){return void 0!==ve&&e instanceof ve.ErrnoError||$(e),e.errno}},gettimeofday:function(e){var t=Date.now();return D[e>>2]=t/1e3|0,D[e+4>>2]=t%1e3*1e3|0,0},glAttachShader:function(e,t){gt.attachShader(xe.programs[e],xe.shaders[t])},glBindBuffer:function(e,t){34962==e?gt.currentArrayBufferBinding=t:34963==e&&(gt.currentElementArrayBufferBinding=t),gt.bindBuffer(e,xe.buffers[t])},glBufferData:function(e,t,n,r){gt.bufferData(e,n?C.subarray(n,n+t):t,r)},glClear:function(e){gt.clear(e)},glClearColor:function(e,t,n,r){gt.clearColor(e,t,n,r)},glCompileShader:function(e){gt.compileShader(xe.shaders[e])},glCreateProgram:function(){var e=xe.getNewId(xe.programs),t=gt.createProgram();return t.name=e,xe.programs[e]=t,e},glCreateShader:function(e){var t=xe.getNewId(xe.shaders);return xe.shaders[t]=gt.createShader(e),t},glDrawArrays:function(e,t,n){xe.preDrawHandleClientVertexAttribBindings(t+n),gt.drawArrays(e,t,n),xe.postDrawHandleClientVertexAttribBindings()},glEnableVertexAttribArray:function(e){xe.currentContext.clientBuffers[e].enabled=!0,gt.enableVertexAttribArray(e)},glGenBuffers:function(e,t){Ne(e,t,"createBuffer",xe.buffers)},glGetAttribLocation:function(e,t){return gt.getAttribLocation(xe.programs[e],P(t))},glGetUniformLocation:function(e,t){var n=0;if("]"==(t=P(t))[t.length-1]){var r=t.lastIndexOf("[");n="]"!=t[r+1]?He(t.slice(r+1)):0,t=t.slice(0,r)}var o=xe.programInfos[e]&&xe.programInfos[e].uniforms[t];return o&&n>=0&&n<o[0]?o[1]+n:-1},glLinkProgram:function(e){gt.linkProgram(xe.programs[e]),xe.populateUniformTable(e)},glShaderSource:function(e,t,n,r){var o=xe.getSource(e,t,n,r);gt.shaderSource(xe.shaders[e],o)},glUniform1f:function(e,t){gt.uniform1f(xe.uniforms[e],t)},glUniform2fv:function(e,t,n){if(t<=144)for(var r=We[2*t-1],o=0;o<2*t;o+=2)r[o]=L[n+4*o>>2],r[o+1]=L[n+(4*o+4)>>2];else r=L.subarray(n>>2,n+8*t>>2);gt.uniform2fv(xe.uniforms[e],r)},glUseProgram:function(e){gt.useProgram(xe.programs[e])},glVertexAttribPointer:function(e,t,n,r,o,i){var a=xe.currentContext.clientBuffers[e];if(!gt.currentArrayBufferBinding)return a.size=t,a.type=n,a.normalized=r,a.stride=o,a.ptr=i,a.clientside=!0,void(a.vertexAttribPointerAdaptor=function(e,t,n,r,o,i){this.vertexAttribPointer(e,t,n,r,o,i)});a.clientside=!1,gt.vertexAttribPointer(e,t,n,!!r,o,i)},glViewport:function(e,t,n,r){gt.viewport(e,t,n,r)},setTempRet0:function(e){},sigaction:function(e,t,n){return 0},signal:function(e,t){return 0},strftime_l:function(e,t,n,r){return dt(e,t,n,r)}},St=(function(){var t={env:kt,wasi_snapshot_preview1:kt};function n(t,n){var r,o=t.exports;o=ht.instrumentWasmExports(o),e.asm=o,g=e.asm.memory,r=g.buffer,E=r,e.HEAP8=x=new Int8Array(r),e.HEAP16=k=new Int16Array(r),e.HEAP32=D=new Int32Array(r),e.HEAPU8=C=new Uint8Array(r),e.HEAPU16=S=new Uint16Array(r),e.HEAPU32=A=new Uint32Array(r),e.HEAPF32=L=new Float32Array(r),e.HEAPF64=F=new Float64Array(r),e.asm.__indirect_function_table,X()}function o(e){n(e.instance)}function i(e){return(m||"function"!=typeof fetch?Promise.resolve().then((function(){return Z(J)})):fetch(J,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+J+"'";return e.arrayBuffer()})).catch((function(){return Z(J)}))).then((function(e){return WebAssembly.instantiate(e,t)})).then(e,(function(e){v("failed to asynchronously prepare wasm: "+e),$(e)}))}if(q(),e.instantiateWasm)try{var a=e.instantiateWasm(t,n);return a=ht.instrumentWasmExports(a)}catch(e){return v("Module.instantiateWasm callback failed with error: "+e),!1}(m||"function"!=typeof WebAssembly.instantiateStreaming||W(J)||"function"!=typeof fetch?i(o):fetch(J,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(o,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),i(o)}))}))).catch(r)}(),e.___wasm_call_ctors=function(){return(St=e.___wasm_call_ctors=e.asm.__wasm_call_ctors).apply(null,arguments)}),Dt=(e._main=function(){return(e._main=e.asm.main).apply(null,arguments)},e._free=function(){return(Dt=e._free=e.asm.free).apply(null,arguments)}),At=e._malloc=function(){return(At=e._malloc=e.asm.malloc).apply(null,arguments)},Lt=(e._strstr=function(){return(e._strstr=e.asm.strstr).apply(null,arguments)},e.___errno_location=function(){return(Lt=e.___errno_location=e.asm.__errno_location).apply(null,arguments)}),Ft=e._emscripten_GetProcAddress=function(){return(Ft=e._emscripten_GetProcAddress=e.asm.emscripten_GetProcAddress).apply(null,arguments)},Bt=e.stackSave=function(){return(Bt=e.stackSave=e.asm.stackSave).apply(null,arguments)},Mt=e.stackRestore=function(){return(Mt=e.stackRestore=e.asm.stackRestore).apply(null,arguments)},Pt=e.stackAlloc=function(){return(Pt=e.stackAlloc=e.asm.stackAlloc).apply(null,arguments)},Rt=(e._emscripten_stack_set_limits=function(){return(e._emscripten_stack_set_limits=e.asm.emscripten_stack_set_limits).apply(null,arguments)},e._emscripten_stack_get_base=function(){return(e._emscripten_stack_get_base=e.asm.emscripten_stack_get_base).apply(null,arguments)},e._emscripten_stack_get_end=function(){return(e._emscripten_stack_get_end=e.asm.emscripten_stack_get_end).apply(null,arguments)},e._setThrew=function(){return(e._setThrew=e.asm.setThrew).apply(null,arguments)},e.dynCall_vi=function(){return(Rt=e.dynCall_vi=e.asm.dynCall_vi).apply(null,arguments)}),Tt=(e.dynCall_ii=function(){return(e.dynCall_ii=e.asm.dynCall_ii).apply(null,arguments)},e.dynCall_vii=function(){return(e.dynCall_vii=e.asm.dynCall_vii).apply(null,arguments)},e.dynCall_iiii=function(){return(Tt=e.dynCall_iiii=e.asm.dynCall_iiii).apply(null,arguments)}),zt=(e.dynCall_viijii=function(){return(e.dynCall_viijii=e.asm.dynCall_viijii).apply(null,arguments)},e.dynCall_viiii=function(){return(e.dynCall_viiii=e.asm.dynCall_viiii).apply(null,arguments)},e.dynCall_iii=function(){return(e.dynCall_iii=e.asm.dynCall_iii).apply(null,arguments)},e.dynCall_iiiii=function(){return(e.dynCall_iiiii=e.asm.dynCall_iiiii).apply(null,arguments)},e.dynCall_jiji=function(){return(e.dynCall_jiji=e.asm.dynCall_jiji).apply(null,arguments)},e.dynCall_ji=function(){return(e.dynCall_ji=e.asm.dynCall_ji).apply(null,arguments)},e.dynCall_v=function(){return(zt=e.dynCall_v=e.asm.dynCall_v).apply(null,arguments)});function Ot(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function It(t){var n,r=e._main,o=(t=t||[]).length+1,i=Pt(4*(o+1));D[i>>2]=I(l);for(var a=1;a<o;a++)D[(i>>2)+a]=I(t[a-1]);D[(i>>2)+o]=0;try{var s=r(o,i);p||(n=s,p&&0===n||(p||(e.onExit&&e.onExit(n),w=!0),f(n,new Ot(n))))}catch(e){if(e instanceof Ot)return;if("unwind"==e)return void(p=!0);var u=e;e&&"object"==typeof e&&e.stack&&(u=[e,e.stack]),v("exception thrown: "+u),f(1,e)}}function Nt(n){function r(){Ct||(Ct=!0,e.calledRun=!0,w||(e.noFSInit||ve.init.initialized||ve.init(),me.init(),te(G),ve.ignorePermissions=!1,te(U),t(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),Gt&&It(n),function(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)t=e.postRun.shift(),j.unshift(t);var t;te(j)}()))}n=n||c,V>0||(function(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)t=e.preRun.shift(),N.unshift(t);var t;te(N)}(),V>0||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),r()}),1)):r()))}if(e.dynCall_iiiiii=function(){return(e.dynCall_iiiiii=e.asm.dynCall_iiiiii).apply(null,arguments)},e.dynCall_iiiiiiiiii=function(){return(e.dynCall_iiiiiiiiii=e.asm.dynCall_iiiiiiiiii).apply(null,arguments)},e.dynCall_iiiiiidii=function(){return(e.dynCall_iiiiiidii=e.asm.dynCall_iiiiiidii).apply(null,arguments)},e.dynCall_iiiiiiiii=function(){return(e.dynCall_iiiiiiiii=e.asm.dynCall_iiiiiiiii).apply(null,arguments)},e.dynCall_viiiiiii=function(){return(e.dynCall_viiiiiii=e.asm.dynCall_viiiiiii).apply(null,arguments)},e.dynCall_viiiiiiiiiii=function(){return(e.dynCall_viiiiiiiiiii=e.asm.dynCall_viiiiiiiiiii).apply(null,arguments)},e.dynCall_iiiiiiii=function(){return(e.dynCall_iiiiiiii=e.asm.dynCall_iiiiiiii).apply(null,arguments)},e.dynCall_i=function(){return(e.dynCall_i=e.asm.dynCall_i).apply(null,arguments)},e.dynCall_viii=function(){return(e.dynCall_viii=e.asm.dynCall_viii).apply(null,arguments)},e.dynCall_iidiiii=function(){return(e.dynCall_iidiiii=e.asm.dynCall_iidiiii).apply(null,arguments)},e.dynCall_iiiiiii=function(){return(e.dynCall_iiiiiii=e.asm.dynCall_iiiiiii).apply(null,arguments)},e.dynCall_iiiiij=function(){return(e.dynCall_iiiiij=e.asm.dynCall_iiiiij).apply(null,arguments)},e.dynCall_iiiiid=function(){return(e.dynCall_iiiiid=e.asm.dynCall_iiiiid).apply(null,arguments)},e.dynCall_iiiiijj=function(){return(e.dynCall_iiiiijj=e.asm.dynCall_iiiiijj).apply(null,arguments)},e.dynCall_iiiiiijj=function(){return(e.dynCall_iiiiiijj=e.asm.dynCall_iiiiiijj).apply(null,arguments)},e.dynCall_viiiiii=function(){return(e.dynCall_viiiiii=e.asm.dynCall_viiiiii).apply(null,arguments)},e.dynCall_viiiii=function(){return(e.dynCall_viiiii=e.asm.dynCall_viiiii).apply(null,arguments)},e.dynCall_vffff=function(){return(e.dynCall_vffff=e.asm.dynCall_vffff).apply(null,arguments)},e.dynCall_vf=function(){return(e.dynCall_vf=e.asm.dynCall_vf).apply(null,arguments)},e.dynCall_viiiiiiii=function(){return(e.dynCall_viiiiiiii=e.asm.dynCall_viiiiiiii).apply(null,arguments)},e.dynCall_viiiiiiiii=function(){return(e.dynCall_viiiiiiiii=e.asm.dynCall_viiiiiiiii).apply(null,arguments)},e.dynCall_vff=function(){return(e.dynCall_vff=e.asm.dynCall_vff).apply(null,arguments)},e.dynCall_vfi=function(){return(e.dynCall_vfi=e.asm.dynCall_vfi).apply(null,arguments)},e.dynCall_viif=function(){return(e.dynCall_viif=e.asm.dynCall_viif).apply(null,arguments)},e.dynCall_vif=function(){return(e.dynCall_vif=e.asm.dynCall_vif).apply(null,arguments)},e.dynCall_viff=function(){return(e.dynCall_viff=e.asm.dynCall_viff).apply(null,arguments)},e.dynCall_vifff=function(){return(e.dynCall_vifff=e.asm.dynCall_vifff).apply(null,arguments)},e.dynCall_viffff=function(){return(e.dynCall_viffff=e.asm.dynCall_viffff).apply(null,arguments)},e._asyncify_start_unwind=function(){return(e._asyncify_start_unwind=e.asm.asyncify_start_unwind).apply(null,arguments)},e._asyncify_stop_unwind=function(){return(e._asyncify_stop_unwind=e.asm.asyncify_stop_unwind).apply(null,arguments)},e._asyncify_start_rewind=function(){return(e._asyncify_start_rewind=e.asm.asyncify_start_rewind).apply(null,arguments)},e._asyncify_stop_rewind=function(){return(e._asyncify_stop_rewind=e.asm.asyncify_stop_rewind).apply(null,arguments)},e.callMain=It,e.abort=$,e.JSEvents=Ce,e.specialHTMLTargets=Se,e.GL=xe,H=function e(){Ct||Nt(),Ct||(H=e)},e.run=Nt,e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();var Gt=!0;return e.noInitialRun&&(Gt=!1),p=!0,Nt(),e.ready});e.exports=r}(Ne={path:Ie,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&Ne.path)}},Ne.exports),Ne.exports);function Ue(e,t,n){const r=e.slice();return r[3]=t[n],r}function je(e){let t,n;return t=new Oe({props:{module:e[3].module,options:{autorun:e[3].autorun,wasmPath:"module/wasm-test.wasm"}}}),{c(){I(t.$$.fragment)},m(e,r){N(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.module=e[3].module),1&n&&(r.options={autorun:e[3].autorun,wasmPath:"module/wasm-test.wasm"}),t.$set(r)},i(e){n||(z(t.$$.fragment,e),n=!0)},o(e){O(t.$$.fragment,e),n=!1},d(e){G(t,e)}}}function Ve(e){let t,n,o,i,l,p,g,h,v,y=e[0],_=[];for(let t=0;t<y.length;t+=1)_[t]=je(Ue(e,y,t));const w=e=>O(_[e],1,1,(()=>{_[e]=null}));return{c(){t=c("main");for(let e=0;e<_.length;e+=1)_[e].c();n=f(),o=c("div"),i=c("button"),i.textContent="Add",l=f(),p=c("button"),p.textContent="Reset",m(i,"class","svelte-1ria4wk"),m(p,"class","svelte-1ria4wk"),m(o,"class","buttonContainer svelte-1ria4wk"),m(t,"class","svelte-1ria4wk")},m(r,u){s(r,t,u);for(let e=0;e<_.length;e+=1)_[e].m(t,null);a(t,n),a(t,o),a(o,i),a(o,l),a(o,p),g=!0,h||(v=[d(i,"click",e[1]),d(p,"click",e[2])],h=!0)},p(e,[r]){if(1&r){let o;for(y=e[0],o=0;o<y.length;o+=1){const i=Ue(e,y,o);_[o]?(_[o].p(i,r),z(_[o],1)):(_[o]=je(i),_[o].c(),z(_[o],1),_[o].m(t,n))}for(R(),o=y.length;o<_.length;o+=1)w(o);T()}},i(e){if(!g){for(let e=0;e<y.length;e+=1)z(_[e]);g=!0}},o(e){_=_.filter(Boolean);for(let e=0;e<_.length;e+=1)O(_[e]);g=!1},d(e){e&&u(t),function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(_,e),h=!1,r(v)}}}function He(e,t,n){let r=[{module:Ge,autorun:!0},{module:Ge,autorun:!0}];return[r,function(){r.length<16?n(0,r=[...r,{module:Ge,autorun:!0}]):console.error("Not creating more than 16 components.")},function(){n(0,r=r.slice(0,2))}]}return new class extends V{constructor(e){super(),j(this,e,He,Ve,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
